<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>direito.love ‚Äî Pesquisa</title>
  <meta name="theme-color" content="#F5C400" />

  <!-- SEO -->
  <meta name="description" content="Pesquisa de artigos, s√∫mulas, jurisprud√™ncias e enunciados jur√≠dicos no direito.love" />
  <meta name="keywords" content="pesquisa jur√≠dica, direito, OAB, concursos, jurisprud√™ncia, s√∫mulas" />
  <meta name="author" content="direito.love" />
  <meta name="robots" content="index, follow" />

  <!-- Favicon -->
  <link rel="icon" href="favicon.png" type="image/png" />
  <link rel="apple-touch-icon" href="favicon-180.png" />

  <style>
    :root{
      --bg:#FFFDF0; --surface:#ffffff; --text:#001840; --border:#e5e7eb;
      --primary:#102A71; --highlight:#F5C400; --highlight-light:#FFDC5F;
      --radius:10px; --shadow:0 4px 16px rgba(0,0,0,.05);
      --font:-apple-system,BlinkMacSystemFont,"Inter","Segoe UI",Roboto,system-ui,sans-serif;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font:400 13px/1.4 var(--font);}
    .topbar{position:sticky;top:0;z-index:30;background:var(--highlight);border-bottom:2px solid var(--primary);
      display:flex;justify-content:space-between;align-items:center;padding:4px 8%;}
    .topbar .logo img{height:40px;width:auto}
    .nav-buttons{display:flex;gap:12px}
    .nav-buttons img{height:26px;width:26px;cursor:pointer;transition:transform .15s}
    .nav-buttons img:hover{transform:scale(1.1)}
    .wrap{max-width:900px;margin:0 auto;padding:22px;}
    h2{margin:0 0 10px;color:var(--primary)}
    .search-box{margin:20px 0}
    #busca{width:100%;padding:10px 12px;border:2px solid var(--primary);border-radius:8px;font-size:15px}

    .result{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);
      padding:12px 14px;margin:12px 0;position:relative}
    .result p{margin:0;font-size:13px;line-height:1.4}
    .filetag{margin:0 0 6px 0;font-weight:700}
    .actions{margin-top:8px;display:flex;justify-content:space-between;gap:8px}
    .btn{appearance:none;border:none;background:var(--highlight);color:#000;padding:6px 10px;border-radius:8px;
      font-size:13px;cursor:pointer;transition:.15s}
    .btn:hover{background:var(--highlight-light)}
    .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:18px;background:#111;color:#fff;
      padding:8px 12px;border-radius:999px;opacity:0;transition:.2s;z-index:60}
    .toast.show{opacity:1}
  </style>
</head>
<body>
  <header class="topbar">
    <div class="logo"><a href="index.html"><img src="icons/logo.png" alt="direito.love"></a></div>
    <nav class="nav-buttons">
      <a href="index.html"><img src="icons/inicio.png" alt="In√≠cio"></a>
      <a href="pesquisa.html"><img src="icons/pesquisar.png" alt="Pesquisar"></a>
    </nav>
  </header>

  <div class="wrap">
    <h2>Pesquisa de Conte√∫do Jur√≠dico</h2>
    <p>Digite um termo (artigo, s√∫mula, jurisprud√™ncia ou palavra-chave) para buscar nos arquivos.</p>
    <div class="search-box">
      <input id="busca" type="text" placeholder="Ex: artigo 5¬∫, s√∫mula 381, dano moral..." />
    </div>
    <div id="resultados"></div>
  </div>

  <div id="toast" class="toast"></div>

<script>
(function(){
  const $=(s,r=document)=>r.querySelector(s);
  const resultados=$("#resultados");
  const busca=$("#busca");
  const toast=(msg,t=1600)=>{const el=$("#toast");el.textContent=msg;el.classList.add("show");
    setTimeout(()=>el.classList.remove("show"),t);};

  // üîπ Seus arquivos JSON
  const arquivos = {
    julgados_direito_administrativo: "data/julgados_direito_administrativo.json",
    julgados_direito_ambiental: "data/julgados_direito_ambiental.json",
    julgados_direito_bancario: "data/julgados_direito_bancario.json",
    julgados_direito_civil: "data/julgados_direito_civil.json",
    penal: "data/penal.json",
    processo_penal: "data/processo_penal.json",
    sumula_stf: "data/sumula_stf.json",
    sumulas_stj: "data/sumulas_stj.json",
    sumulas_tse: "data/sumulas_tse.json",
    sumulas_vinculantes_stf: "data/sumulas_vinculantes_stf.json",
    temas_repetitivos_stj: "data/temas_repetitivos_stj.json",
    teses_stf: "data/teses_stf.json"
  };

  let cache = {};

  async function carregarArquivo(tag){
    if(cache[tag]) return cache[tag];
    try{
      const r=await fetch(arquivos[tag]);
      if(!r.ok) return [];
      const j=await r.json();
      cache[tag]=j;
      return j;
    }catch(e){ console.warn("Erro ao carregar",tag,e); return []; }
  }

  function normalizar(s){
    return s.toLowerCase()
      .normalize("NFD").replace(/[\u0300-\u036f]/g,"")
      .replace(/√ß/g,"c");
  }

  async function filtrarRender(){
    const termo=normalizar(busca.value.trim());
    resultados.innerHTML="";
    if(!termo) return;

    let achados=[];
    for(const tag of Object.keys(arquivos)){
      const dados=await carregarArquivo(tag);
      const lista=dados.filter(x=>
        normalizar(x.texto||"").includes(termo)
      ).map(x=>({...x, fonte:tag}));
      achados.push(...lista);
    }

    if(!achados.length){
      resultados.innerHTML="<p>Nenhum resultado encontrado.</p>";
      return;
    }

    achados.forEach(item=>{
      const div=document.createElement("div");
      div.className="result";

      const fonteP=document.createElement("p");
      fonteP.className="filetag";
      fonteP.innerHTML=`<strong>${(item.fonte||'').trim()}</strong>`;
      div.appendChild(fonteP);

      const p=document.createElement("p");
      p.textContent=item.texto;
      div.appendChild(p);

      const actions=document.createElement("div");
      actions.className="actions";

      const copiar=document.createElement("button");
      copiar.textContent="Copiar";
      copiar.className="btn";
      copiar.addEventListener("click",async()=>{
        try{
          await navigator.clipboard.writeText(item.texto||'');
          toast("Copiado!");
        }catch{ toast("Erro ao copiar."); }
      });

      actions.appendChild(copiar);
      div.appendChild(actions);

      resultados.appendChild(div);
    });
  }

  busca.addEventListener("input",filtrarRender);
})();
</script>
</body>
</html>
