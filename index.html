<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0a3a4a" />
  <title>AD - Gerador de Prompt</title>
  <style>
    :root{
      --ink:#0b2f3b;
      --bg:#ffffff;
      --panel:#63cfc1;
      --panel-2:#e9f2f5;
      --btn:#0b3b4a;
      --btn-copy:#6b7785;
      --btn-reset:#4b5563;
      --border:#d8e2e7;
      --topbar:#63d1c3; /* NOVO: cor do menu fixo no topo */
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;background:var(--bg);color:var(--ink);padding-top:64px}

    /* Topbar atualizada */
    .topbar{
      position:fixed;top:0;left:0;right:0;height:64px;
      display:flex;align-items:center;justify-content:space-between;
      padding:0 18px;background:var(--topbar);z-index:1000;
      border-bottom:1px solid var(--border)
    }
    .topbar .brand{font-weight:900;letter-spacing:.2px;color:var(--ink)}
    .topbar .right{display:flex;align-items:center;gap:12px}

    /* Bot√£o/√≠cone Instagram */
    .insta-link{
      display:inline-flex;align-items:center;justify-content:center;
      width:28px;height:28px;border-radius:6px;text-decoration:none;
      transition:transform .12s ease;
    }
    .insta-link:hover{transform:translateY(-1px)}
    .insta-link svg{display:block;width:100%;height:100%}

    .hero{display:grid;gap:8px;max-width:960px;margin:0 auto;padding:40px 20px 24px;align-items:start}
    .quote{font-weight:800;line-height:1.05;color:var(--ink);font-size:clamp(28px,6vw,64px)}
    .author{font-style:italic;font-size:clamp(14px,2.2vw,22px);opacity:.85}

    .panel{background:var(--panel);border-radius:32px;padding:24px;max-width:960px;margin:0 auto}
    @media (min-width:861px){.panel{padding:32px;box-shadow:0 10px 28px rgba(0,0,0,.06)}}

    .field-wrap{margin:16px 0 20px}
    .label{font-weight:900;font-size:clamp(16px,2.6vw,26px);color:#08333e;margin:0 0 12px}
    .field{width:100%;background:var(--panel-2);border:1px solid var(--border);border-radius:18px;padding:16px;color:#11323c;outline:none}
    textarea.field{min-height:120px;resize:vertical}

    .actions-out{display:flex;flex-direction:column;gap:14px}
    .actions-buttons{display:flex;gap:12px;flex-wrap:wrap}
    .btn{border:none;border-radius:999px;padding:10px 18px;font-weight:800;letter-spacing:.3px;color:#fff;cursor:pointer}
    .btn-primary{background:var(--btn)}
    .btn-copy{background:var(--btn-copy);font-size:14px;padding:8px 14px}
    .btn-reset{background:var(--btn-reset)}

    .output{background:var(--panel-2);border:1px solid var(--border);border-radius:18px;min-height:160px;padding:16px;color:#16333b;width:100%;resize:vertical}

    /* Book */
    .chipbtn{border:1px solid var(--border);background:#fff;color:var(--ink);border-radius:999px;padding:6px 12px;font-weight:700;cursor:pointer;font-size:13px}
    .chipbtn:active{transform:translateY(1px)}
    .book-list{max-height:60vh;overflow:auto;border:1px solid var(--border);border-radius:16px;background:#fff}
    .book-item{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;padding:12px 14px;border-bottom:1px solid var(--border)}
    .book-item:last-child{border-bottom:none}
    .book-meta{min-width:220px;max-width:calc(100% - 120px)}
    .book-obj{font-weight:800;color:#08333e}
    .book-tema{opacity:.9;margin-top:4px;font-size:14px}

    .tabs{max-width:960px;margin:16px auto;padding:0 20px;display:none;gap:8px}
    .tab-btn{border:1px solid var(--border);background:#fff;color:#000;padding:8px 14px;border-radius:999px;font-weight:700;cursor:pointer}
    .tab-btn[aria-selected="true"]{background:var(--ink);color:#fff;border-color:transparent}

    .tabbar{position:fixed;bottom:0;left:0;right:0;height:56px;background:#ffffff;border-top:1px solid var(--border);display:flex;justify-content:space-around;align-items:center;z-index:1000}
    .tabbar button{all:unset;cursor:pointer;display:flex;flex-direction:column;align-items:center;gap:2px;padding:6px 10px;border-radius:10px}
    .tabbar button[aria-selected="true"]{background:#64e2d6}
    .tabbar .lbl{font-size:18px;font-weight:700;color:#0b2f3b}

    .tab-content{display:none;padding-bottom:72px}
    .tab-content.is-active{display:block}

    @media (min-width:861px){.tabbar{display:none}.tabs{display:flex}.tab-content{padding-bottom:20px}}
  </style>
</head>
<body>
  <!-- Topbar com Instagram √† direita -->
  <nav class="topbar">
    <div class="brand">AD - Gerador de Prompt</div>
    <div class="right">
      <a class="insta-link" href="https://www.instagram.com/osvaldosereiajr/" target="_blank" rel="noopener" aria-label="Abrir Instagram @osvaldosereiajr" title="@osvaldosereiajr">
        <!-- SVG Instagram colorido -->
        <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
          <defs>
            <linearGradient id="igGrad" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0%" stop-color="#f58529"/>
              <stop offset="30%" stop-color="#feda77"/>
              <stop offset="60%" stop-color="#dd2a7b"/>
              <stop offset="80%" stop-color="#8134af"/>
              <stop offset="100%" stop-color="#515bd4"/>
            </linearGradient>
          </defs>
          <rect x="0" y="0" width="24" height="24" rx="6" fill="url(#igGrad)"/>
          <rect x="3" y="3" width="18" height="18" rx="5" fill="none" stroke="#ffffff" stroke-width="2"/>
          <circle cx="12" cy="12" r="4.5" fill="none" stroke="#ffffff" stroke-width="2"/>
          <circle cx="17.2" cy="6.8" r="1.3" fill="#ffffff"/>
        </svg>
      </a>
    </div>
  </nav>

  <header class="hero"><div id="quote" class="quote">‚Äî</div><div id="author" class="author"></div></header>

  <nav class="tabs" role="tablist">
    <button class="tab-btn" aria-selected="true" aria-controls="tab-gerador" id="tabbtn-gerador">Gerador</button>
    <button class="tab-btn" aria-selected="false" aria-controls="tab-book" id="tabbtn-book">Arquivo</button>
    <button class="tab-btn" aria-selected="false" aria-controls="tab-dicas" id="tabbtn-dicas">Dicas</button>
  </nav>

  <!-- Gerador -->
  <section id="tab-gerador" class="tab-content is-active">
    <main class="panel">
      <div class="field-wrap">
        <h3 class="label">Qual seu objetivo?</h3>
        <select id="strategy" class="field">
          <option value="explicacao">Explica√ß√£o B√°sica</option>
          <option value="resumo">Resumo Objetivo</option>
          <option value="artigo">An√°lise Detalhada</option>
          <option value="aplicacao">Aplica√ß√£o Pr√°tica</option>
          <option value="simulado">Exerc√≠cios/Testes</option>
          <option value="faq">Perguntas Frequentes</option>
          <option value="debate">Debate/Reflex√£o</option>
          <option value="atualizacao">Contexto Atualizado</option>
          <option value="plano">Plano de Estudo</option>
          <option value="apresentacao">Apresenta√ß√£o Oral</option>
          <option value="slide">Slide</option>
          <option value="jurisprudencia">Jurisprud√™ncia</option>
        </select>
      </div>
      <div class="field-wrap">
        <h3 class="label">Vamos falar sobre o qu√™?</h3>
        <textarea id="theme" class="field" placeholder="Digite o tema"></textarea>
      </div>
      <div class="actions-out">
        <div class="actions-buttons">
          <button id="generate" class="btn btn-primary">Gerar</button>
          <button id="copy" class="btn btn-copy">Copiar</button>
          <button id="reset" class="btn btn-reset">Reiniciar</button>
        </div>
        <textarea id="result" class="output" placeholder="Prompt gerado aqui..." readonly></textarea>
      </div>
    </main>
  </section>

  <!-- Book -->
  <section id="tab-book" class="tab-content">
    <main class="panel">
      <h2 class="label">Arquivo ‚Äì Suas √∫ltimas 500 gera√ß√µes</h2>
      <p class="field" style="min-height:0;margin-top:0">Carrega automaticamente de 10 em 10 enquanto voc√™ rola.</p>
      <div id="book-list" class="book-list"></div>
    </main>
  </section>

  <!-- Dicas -->
  <section id="tab-dicas" class="tab-content">
    <main class="panel">
      <h2 class="label">Dicas de Uso ‚Äî como cada objetivo gera a resposta</h2>
      <div class="field" style="white-space:pre-wrap"><b>Explica√ß√£o B√°sica</b> ‚Äî defini√ß√£o curta, 2‚Äì3 analogias e 3 pontos-chave, mais 2 erros comuns e um mini-exemplo. 

<b>Resumo Objetivo</b> ‚Äî conceito em 2 linhas, base legal, estrutura, 3 diferen√ßas f√°ceis de confundir, tend√™ncias, 3 pegadinhas e 2 mini-cases.

<b>An√°lise Detalhada</b> ‚Äî artigo acad√™mico: introdu√ß√£o (problema, relev√¢ncia, hip√≥tese), desenvolvimento (conceitos, correntes, an√°lise cr√≠tica, jurisprud√™ncia), conclus√£o (s√≠ntese + proposta).

<b>Aplica√ß√£o Pr√°tica</b> ‚Äî caso fict√≠cio, enquadramento jur√≠dico, solu√ß√£o prov√°vel, mini-modelo de pe√ßa e checklist.

<b>Exerc√≠cios/Testes</b> ‚Äî 5 quest√µes (2 f√°ceis, 2 m√©dias, 1 dif√≠cil) com gabarito comentado.

<b>FAQ</b> ‚Äî 15 perguntas essenciais respondidas em at√© 3 linhas, mais 2 confus√µes comuns corrigidas.

<b>Debate/Reflex√£o</b> ‚Äî problema central, 3 argumentos pr√≥ e 3 contra, 1 dilema pr√°tico, perguntas-guia.

<b>Contexto Atualizado</b> ‚Äî panorama legislativo e jurisprudencial recente, impactos pr√°ticos, pontos controversos.

<b>Plano de Estudo</b> ‚Äî cronograma de 4 semanas, rotina de revis√£o espa√ßada, exerc√≠cios e erros comuns.

<b>Apresenta√ß√£o em Sala</b> ‚Äî discurso de ~4 min: abertura, contexto, base legal/doutrina/jurisprud√™ncia segura, caso ilustrativo, argumenta√ß√£o, fechamento forte.

<b>Jurisprud√™ncia (Radar)</b> ‚Äî 15 itens verificados (tribunal, n¬∫, ano, tese resumida, impacto pr√°tico).

üí° Escreva o tema de forma espec√≠fica (ex.: ‚Äútutela de urg√™ncia, art. 300, CPC/2015‚Äù), dando contexto e objetivo. Rode tamb√©m no <b>Gemini</b>.
      </div>
    </main>
  </section>

  <div class="footer"></div>

  <nav class="tabbar" role="tablist">
    <button aria-selected="true" aria-controls="tab-gerador" id="m-tabbtn-gerador"><span class="lbl">Gerar</span></button>
    <button aria-selected="false" aria-controls="tab-book" id="m-tabbtn-book"><span class="lbl">Arquivo</span></button>
    <button aria-selected="false" aria-controls="tab-dicas" id="m-tabbtn-dicas"><span class="lbl">Dicas</span></button>
  </nav>

  <script>
    // Frase aleat√≥ria
    const QUOTES=['N√£o h√° liberdade sem lei. ‚Äî Montesquieu','A justi√ßa sem for√ßa √© impotente; a for√ßa sem justi√ßa √© tirana. ‚Äî Pascal'];
    function loadRandomQuote(){const pick=QUOTES[Math.floor(Math.random()*QUOTES.length)];const parts=pick.split('‚Äî');document.getElementById('quote').textContent=(parts[0]||pick).trim();document.getElementById('author').textContent=parts[1]?'‚Äî '+parts[1].trim():'';}
    loadRandomQuote();

    // Tabs
    const tabIds=['gerador','book','dicas'];
    function activateTab(id){for(const t of tabIds){document.getElementById('tab-'+t).classList.toggle('is-active',t===id);document.getElementById('tabbtn-'+t)?.setAttribute('aria-selected',String(t===id));document.getElementById('m-tabbtn-'+t)?.setAttribute('aria-selected',String(t===id));}}
    for(const t of tabIds){document.getElementById('tabbtn-'+t)?.addEventListener('click',()=>activateTab(t));document.getElementById('m-tabbtn-'+t)?.addEventListener('click',()=>activateTab(t));}

    // ===== Gerador: Templates + handlers =====
    const TEMPLATES = {
      explicacao: (tema) => `Voc√™ √© um **tutor de Direito** no Brasil, especialista em did√°tica jur√≠dica.  
Persona: professor paciente e criativo, que explica para iniciantes.  
Linguagem: simples, clara, sem juridiqu√™s; use exemplos pr√°ticos e analogias do cotidiano.  

Tarefa: Explique o tema **${tema}** de forma **muito did√°tica e acess√≠vel**, como se estivesse pegando na m√£o do estudante iniciante.  
Estrutura:  
1) Defini√ß√£o essencial (at√© 3 linhas).  
2) 2‚Äì3 analogias do cotidiano.  
3) Explica√ß√£o passo a passo (do b√°sico ao detalhe, sempre explicando o porqu√™).  
4) Mini-exemplo pr√°tico (caso simples e realista).  
5) Resumo executivo (3 a 5 frases curtas com pontos-chave).  
6) Checklist para o estudante (3 a 5 perguntas de autoavalia√ß√£o).  

Recursos: headings (H2‚ÄìH3), listas, par√°grafos curtos, termos-chave em **negrito**, met√°foras e hist√≥rias curtas quando √∫til.  
Regras: sem links; enunciados, s√∫mulas e jurisprud√™ncia s√≥ se 100% segura.  

Fecho: frase motivacional final + s√≠ntese em 2 frases.`,
      resumo: (tema) => `Voc√™ √© um **resumidor jur√≠dico** no Brasil, especialista em s√≠ntese clara e objetiva.  
Persona: professor pr√°tico e direto, que entrega apenas o essencial para uma leitura r√°pida.  
Linguagem: concisa, sem enrola√ß√£o, sem juridiqu√™s exagerado.  

Tarefa: Produza um **resumo r√°pido e estruturado** sobre **${tema}**, destacando s√≥ o que realmente importa para fixar o conte√∫do.  
Estrutura:  
1) Defini√ß√£o objetiva (1‚Äì2 linhas).  
2) Pontos-chave (3 a 5 t√≥picos curtos e numerados).  
3) Aplica√ß√µes pr√°ticas mais comuns (at√© 3 itens).  
4) Armadilhas ou erros frequentes (at√© 2).  
5) Fecho em formato ‚Äúlembrete‚Äù (1‚Äì2 frases curtas).  

Recursos: headings (H2‚ÄìH3), listas, palavras-chave em **negrito**, frases curtas.  
Regras: sem links; enunciados, s√∫mulas e jurisprud√™ncia s√≥ se 100% segura.  

Fecho: s√≠ntese final em 2 frases (estilo ‚Äúflashcard‚Äù).`,
      artigo: (tema) => `Voc√™ √© um **jurista pesquisador** no Brasil, especialista em produ√ß√£o acad√™mica aplicada ao ensino jur√≠dico.  
Persona: acad√™mico cr√≠tico, mas acess√≠vel, que conecta teoria, jurisprud√™ncia e pr√°tica forense.  
Linguagem: t√©cnica e clara, mas envolvente; par√°grafos curtos (2‚Äì3 linhas); uso moderado de termos t√©cnicos explicados de forma simples.  

Tarefa: Produza um **artigo acad√™mico abrangente e memor√°vel** sobre **${tema}**, que aprofunde o conhecimento do estudante e o surpreenda pela riqueza de conte√∫do.  
Estrutura:  
1) **Introdu√ß√£o**: relev√¢ncia pr√°tica, problema central e hip√≥tese.  
2) **Desenvolvimento**:  
   - Conceitos essenciais e evolu√ß√£o hist√≥rica.  
   - Correntes doutrin√°rias (principais posi√ß√µes, pr√≥s e contras).  
   - Entendimentos jurisprudenciais majorit√°rios (STJ, STF ou tribunais relevantes).  
   - **Casos concretos**: apresente 1‚Äì2 julgados paradigm√°ticos ou situa√ß√µes realistas para an√°lise pr√°tica.  
   - Reflexos na pr√°tica processual (como o tema aparece em peti√ß√µes, decis√µes, audi√™ncias ou julgamentos).  
   - Pontos de tens√£o ou controv√©rsias atuais.  
3) **Conclus√£o**: s√≠ntese cr√≠tica + tend√™ncias jurisprudenciais e propostas de aplica√ß√£o pr√°tica.  

Recursos: headings (H2‚ÄìH3), listas sempre que poss√≠vel, termos-chave em **negrito**, exemplos e compara√ß√µes para fixar a ideia.  
Regras: sem links; enunciados, s√∫mulas e jurisprud√™ncia s√≥ se 100% segura.  

Fecho: resumo executivo (2‚Äì3 frases) + refer√™ncias essenciais (at√© 5, com autor, t√≠tulo e ano).`,
      aplicacao: (tema) => `Voc√™ √© um **advogado experiente e professor de pr√°tica jur√≠dica** no Brasil.  
Persona: pr√°tico, direto, como quem treina estagi√°rios e jovens advogados.  
Linguagem: objetiva, mas explicativa; conectando teoria m√≠nima √† pr√°tica forense real.  

Tarefa: Explique **${tema}** de forma **abrangente e aplicada**, cobrindo todos os √¢ngulos poss√≠veis da pr√°tica jur√≠dica.  
Estrutura:  
1) Contextualiza√ß√£o inicial: relev√¢ncia do tema no dia a dia forense.  
2) Enquadramento jur√≠dico: dispositivos legais e fundamentos principais.  
3) Pr√°tica processual:  
   - Como o tema aparece em peti√ß√µes iniciais, defesas, recursos ou sustenta√ß√µes.  
   - Estrat√©gias pr√°ticas adotadas por advogados e procuradores.  
   - Orienta√ß√µes para atua√ß√£o em audi√™ncia e fase recursal.  
4) Jurisprud√™ncia aplicada: entendimentos majorit√°rios que impactam a pr√°tica.  
5) Casos concretos: 1‚Äì2 exemplos realistas com an√°lise da solu√ß√£o jur√≠dica.  
6) Erros comuns na atua√ß√£o pr√°tica e como evit√°-los.  
7) Checklist profissional: lista de pontos de aten√ß√£o para quem atua com o tema.  

Recursos: headings (H2‚ÄìH3), listas, termos-chave em **negrito**, exemplos narrados em forma de caso.  
Regras: sem links; enunciados, s√∫mulas e jurisprud√™ncia s√≥ se 100% segura.  

Fecho: resumo executivo em 2‚Äì3 frases com recomenda√ß√µes pr√°ticas finais.`,
      simulado: (tema) => `Voc√™ √© um **professor de Direito** no Brasil, especialista em prepara√ß√£o para provas da OAB e concursos.  
Persona: avaliador exigente, mas did√°tico, que usa o simulado como forma de ensino.  
Linguagem: objetiva, clara, sem juridiqu√™s excessivo; explica√ß√µes sempre conectadas √† pr√°tica jur√≠dica.  

Tarefa: Elabore um **simulado de 10 quest√µes de m√∫ltipla escolha** sobre **${tema}**, no estilo OAB/concurso, com gabarito comentado.  
Estrutura:  
1) Cada quest√£o deve ter enunciado claro e 4 alternativas (A‚ÄìD).  
2) Indicar a alternativa correta logo ap√≥s cada quest√£o.  
3) Explicar em at√© 5 linhas:  
   - Por que a correta est√° certa.  
   - Por que as outras est√£o erradas.  
4) Variar os tipos de quest√£o: conceitual, jurisprudencial, pr√°tica processual e casos concretos.  
5) Ao final, incluir um **quadro-resumo** com os principais pontos cobrados no simulado.  

Recursos: headings (H2‚ÄìH3), listas, termos-chave em **negrito**.  
Regras: sem links; enunciados, s√∫mulas e jurisprud√™ncia s√≥ se 100% segura.  

Fecho: mensagem motivacional curta (‚ÄúSe voc√™ errou, √≥timo: √© sinal de aprendizado!‚Äù).`,
      faq: (tema) => `Voc√™ √© um **professor de Direito e mentor acad√™mico** no Brasil, especialista em estimular pensamento cr√≠tico.  
Persona: provocador e instigante, que faz o estudante refletir al√©m do √≥bvio.  
Linguagem: clara, acess√≠vel, mas reflexiva; respostas completas, conectando teoria, jurisprud√™ncia e pr√°tica.  

Tarefa: Produza uma sequ√™ncia de **perguntas e respostas** sobre **${tema}**, que ajude o estudante a ter uma vis√£o mais ampla do assunto.  
Estrutura:  
1) 8 a 10 perguntas estrat√©gicas, em ordem crescente de complexidade.  
2) Cada resposta deve:  
   - Explicar o conceito central.  
   - Conectar com casos concretos ou situa√ß√µes pr√°ticas.  
   - Destacar diverg√™ncias doutrin√°rias ou jurisprudenciais.  
   - Apontar impactos sociais, pol√≠ticos ou econ√¥micos quando cab√≠vel.  
3) Alternar perguntas b√°sicas (‚ÄúO que √©‚Ä¶?‚Äù) com perguntas cr√≠ticas (‚ÄúPor que h√° controv√©rsia‚Ä¶?‚Äù / ‚ÄúQuais os riscos pr√°ticos‚Ä¶?‚Äù).  
4) Ao final, incluir um **bloco de reflex√µes**: 3 a 5 provoca√ß√µes para debate em sala ou estudo em grupo.  

Recursos: headings (H2‚ÄìH3), listas, termos-chave em **negrito**, par√°grafos curtos.  
Regras: sem links; enunciados, s√∫mulas e jurisprud√™ncia s√≥ se 100% segura.  

Fecho: s√≠ntese em 2‚Äì3 frases + pergunta final aberta para reflex√£o (‚ÄúE voc√™, como aplicaria esse conceito na pr√°tica?‚Äù).`,
      debate: (tema) => `Voc√™ √© um **moderador acad√™mico** que organiza um **debate jur√≠dico simulado** entre grandes correntes doutrin√°rias, jurisprudenciais e pr√°ticas forenses sobre **${tema}**.  
Persona: din√¢mico e instigante, conduzindo o debate com ritmo envolvente, mas sempre claro e organizado.  
Linguagem: acad√™mica, mas acess√≠vel; tom vivo, como se fosse uma mesa-redonda.  

Tarefa: Produza um **debate acad√™mico memor√°vel** sobre **${tema}**, explorando todas as linhas poss√≠veis do Direito.  
Estrutura:  
1) **Abertura do Moderador**: breve contextualiza√ß√£o do tema e provoca√ß√£o inicial.  
2) **Apresenta√ß√£o das correntes**:  
   - Doutrinador cl√°ssico (vis√£o hist√≥rica).  
   - Doutrina contempor√¢nea (vis√£o atualizada).  
   - Jurisprud√™ncia dominante (STJ/STF ou tribunais relevantes).  
   - Voz pr√°tica (advogado ou juiz, trazendo o olhar da pr√°tica forense).  
   - Voz cr√≠tica (sociol√≥gica, constitucional ou de direitos humanos).  
3) **Debate vivo**:  
   - Cada ‚Äúpersonagem‚Äù apresenta seus argumentos em blocos curtos.  
   - R√©plicas e tr√©plicas destacando converg√™ncias e diverg√™ncias.  
   - Inclus√£o de **casos concretos** e julgados paradigm√°ticos para dar realismo.  
4) **S√≠ntese do Moderador**: costura final, destacando aprendizados, tens√µes n√£o resolvidas e pontos pac√≠ficos.  
5) **Reflex√£o Final**: convite ao estudante para posicionar-se (‚ÄúCom qual corrente voc√™ se identifica? Como aplicaria isso na pr√°tica?‚Äù).  

Recursos: headings (H2‚ÄìH3), di√°logos curtos identificados por personagens, termos-chave em **negrito**, exemplos pr√°ticos e jurisprudenciais.  
Regras: sem links; enunciados, s√∫mulas e jurisprud√™ncia s√≥ se 100% segura.  

Fecho: resumo executivo (2‚Äì3 frases) + desafio pr√°tico ao estudante.`,
      atualizacao: (tema) => `Voc√™ √© um **jurista analista de jurisprud√™ncia consolidada** no Brasil.  
Persona: pesquisador criterioso e atualizado, que mostra o ‚Äúestado da arte‚Äù da Justi√ßa sobre o tema.  
Linguagem: clara, objetiva e t√©cnica, sem juridiqu√™s excessivo.  

Tarefa: Produza um **mapa dos entendimentos majorit√°rios** sobre **${tema}**, destacando como o tema √© tratado pela Justi√ßa na atualidade.  
Estrutura:  
1) Panorama inicial: relev√¢ncia pr√°tica do tema.  
2) Linha majorit√°ria atual: explique a posi√ß√£o predominante dos tribunais (STJ, STF, TST, etc.).  
3) S√∫mulas aplic√°veis (se houver), com resumo did√°tico do seu conte√∫do.  
4) Tend√™ncias: eventuais mudan√ßas ou refor√ßos de entendimento nos √∫ltimos anos.  
5) Reflexos pr√°ticos: como esse entendimento impacta a advocacia, o processo e a vida do cidad√£o.  

Recursos: headings (H2‚ÄìH3), listas, termos-chave em **negrito**, par√°grafos curtos.  
Regras:  
- N√£o citar n√∫meros de processos ou ac√≥rd√£os espec√≠ficos.  
- Pode citar s√∫mulas ou enunciados consolidados.  
- Sempre dar √™nfase ao **norte pr√°tico**: ‚Äúo que prevalece hoje na Justi√ßa‚Äù.  

Fecho: s√≠ntese em 2‚Äì3 frases, apontando seguran√ßa conceitual para o estudante.`,
      plano: (tema) => `Voc√™ √© um **coach de estudos jur√≠dicos** especialista em memoriza√ß√£o.  
Persona: motivador, organizado.  
Linguagem: objetiva e encorajadora.  

Tarefa: Crie plano de estudo sobre **${tema}** para 4 semanas.  
Estrutura:  
1) Objetivo do ciclo.  
2) Cronograma semanal (Semana 1‚Äì4).  
3) Rotina de revis√£o espa√ßada (1-1-7-15).  
4) Exerc√≠cios pr√°ticos.  
5) Erros comuns e como evitar.  

Recursos: listas e tabela simples em texto.  
Regras: sem links.  

Fecho: frase motivadora (2 linhas) + fontes (at√© 5).`,
      apresentacao: (tema) => `Voc√™ √© um **professor-coach de orat√≥ria jur√≠dica** no Brasil, especialista em transformar conte√∫do jur√≠dico em fala clara e envolvente.  
Persona: did√°tico, direto e confiante; orienta como se estivesse **ensaiando junto** com o estudante.  
Linguagem: frases curtas, ritmo de fala, termos-chave em **negrito**; evitar juridiqu√™s desnecess√°rio.

Tarefa: Produza um **roteiro completo para apresenta√ß√£o oral de at√© 5 minutos** sobre **${tema}**, em formato quase passo a passo, cobrindo o conte√∫do essencial e indicando **marca√ß√µes de tempo**, **entona√ß√£o**, **pausas** e **transi√ß√µes**.

Estrutura (roteiro com tempo sugerido):
1) **Abertura (0:00‚Äì0:20)** ‚Äî gancho + defini√ß√£o em 1 frase.  
   - [ENTONA√á√ÉO FORTE] Gancho que conecte com a realidade.  
   - **Defini√ß√£o essencial** em linguagem leiga. [PAUSA CURTA]
2) **Contexto & Problema (0:20‚Äì0:50)** ‚Äî por que o tema importa na pr√°tica.  
   - Onde aparece no dia a dia forense.  
   - Risco/erro comum que justifica o estudo.
3) **Mapa da Fala (0:50‚Äì1:10)** ‚Äî apresente os **3 pilares** do tema.  
   - ‚ÄúHoje eu explico: **Pilar 1**, **Pilar 2**, **Pilar 3**.‚Äù
4) **Pilar 1 (1:10‚Äì1:50)** ‚Äî conceito + exemplo r√°pido.  
   - Regra geral + exce√ß√£o t√≠pica.  
   - Miniaplica√ß√£o pr√°tica (1‚Äì2 linhas).
5) **Pilar 2 (1:50‚Äì2:30)** ‚Äî requisitos/elementos + onde costuma dar erro.  
   - Checklist pr√°tico (3 itens).  
   - [ENTONA√á√ÉO DID√ÅTICA] ‚ÄúGuarde isso: ‚Ä¶‚Äù
6) **Pilar 3 (2:30‚Äì3:10)** ‚Äî efeitos/consequ√™ncias + estrat√©gia processual.  
   - Como alegar/impugnar; quando vale insistir.
7) **Caso Ilustrativo (3:10‚Äì3:50)** ‚Äî microcaso em 3 atos.  
   - Fato ‚Üí Conflito ‚Üí Solu√ß√£o **segundo a linha predominante**.  
   - [PAUSA] 1 frase de moral do caso.
8) **Entendimento Majorit√°rio & Base Legal Essencial (3:50‚Äì4:20)**  
   - O que **predomina hoje** nos tribunais (sem citar processos).  
   - **S√∫mulas** pertinentes (se houver), resumidas em linguagem acess√≠vel.
9) **Implica√ß√µes Pr√°ticas & Erros Comuns (4:20‚Äì4:40)**  
   - 2 impactos para a advocacia.  
   - 2 erros frequentes e como evitar.
10) **Fecho Memor√°vel (4:40‚Äì5:00)** ‚Äî resumo + frase forte.  
    - 3 bullets de ouro (o que levar para a prova/pe√ßa).  
    - [ENTONA√á√ÉO FIRME] Frase final que gruda.

Recursos: headings (H2‚ÄìH3), listas numeradas, marca√ß√µes **[ENTONA√á√ÉO] [PAUSA] [TRANSI√á√ÉO]**, par√°grafos curtos.  
Regras: sem links; s√∫mulas s√≥ se 100% seguras; n√£o citar n√∫meros de processos/ac√≥rd√£os.  

Fecho: lembrete motivacional curto (‚ÄúVoc√™ domina o mapa: defina, mostre os pilares, ilustre o caso e feche com o entendimento majorit√°rio.‚Äù).`,
      jurisprudencia: (tema) => `Voc√™ √© um **jurista analista de jurisprud√™ncia**.  
Persona: pesquisador criterioso, atualizado, conecta decis√µes e impactos pr√°ticos.  
Linguagem: clara, objetiva e t√©cnica, sem juridiqu√™s desnecess√°rio.  

Tarefa: Fa√ßa um **levantamento em not√≠cias jur√≠dicas e artigos acad√™micos/jur√≠dicos dispon√≠veis na web** sobre **${tema}**, entregando exatamente **15 itens numerados (n√£o mais, n√£o menos)** que contenham cita√ß√µes a julgados, jurisprud√™ncias, ac√≥rd√£os, repetitivos ou s√∫mulas relacionadas ao tema.  

Estrutura de cada item:  
- Tribunal / S√∫mula / √ìrg√£o (se houver).  
- N√∫mero do processo ou da s√∫mula (se houver).  
- Ano do julgamento/publica√ß√£o (se houver).  
- Fonte (**com link completo, link direto do portal original, nunca do Google Not√≠cias ou agregadores**).  
- Tese central resumida em 2‚Äì3 linhas.  
- Impacto pr√°tico (na advocacia, doutrina ou jurisprud√™ncia).  

Regras:  
- N√£o invente decis√µes.  
- Enunciados, s√∫mulas e jurisprud√™ncias s√≥ se 100% confirmados.  
- Pesquise exclusivamente em **not√≠cias jur√≠dicas, artigos acad√™micos e portais confi√°veis**.  
- A an√°lise deve se basear **no conte√∫do publicado no site**, extraindo a informa√ß√£o e comentando brevemente.  
- A sa√≠da deve conter apenas a lista numerada, sem coment√°rios adicionais.`,
      slide: (tema) => `Voc√™ √© um **designer instrucional de Direito** no Brasil, especialista em transformar conte√∫do jur√≠dico em slides claros e impactantes.  
Persona: professor visual, que organiza ideias em blocos simples e memor√°veis.  
Linguagem: objetiva, frases curtas, termos-chave em **negrito**; sem juridiqu√™s.  

Tarefa: Produza uma **sequ√™ncia de slides de estudo** sobre **${tema}**, com estrutura visual clara, de **5 a 8 slides**.  

Estrutura sugerida:
- **Slide 1 (T√≠tulo e Defini√ß√£o Essencial)**: nome do tema + defini√ß√£o em 1‚Äì2 linhas.  
- **Slide 2 (Contexto e Relev√¢ncia)**: por que o tema importa na pr√°tica.  
- **Slide 3 (Pilares / Elementos Centrais)**: 3 a 5 bullets com conceitos-chave.  
- **Slide 4 (Exemplo ou Caso Ilustrativo)**: microcaso em 3 bullets (fato ‚Üí conflito ‚Üí solu√ß√£o).  
- **Slide 5 (Entendimento Majorit√°rio / S√∫mulas)**: posi√ß√£o predominante da Justi√ßa e s√∫mulas relevantes.  
- **Slide 6 (Implica√ß√µes Pr√°ticas)**: reflexos no processo, advocacia e sociedade.  
- **Slide 7 (Erros Comuns ou Armadilhas)**: 2‚Äì3 bullets com alertas.  
- **Slide 8 (Fecho)**: resumo em 3 bullets de ouro + frase motivacional curta.  

Recursos:  
- Usar listas com 3‚Äì5 itens no m√°ximo.  
- T√≠tulos curtos e marcantes.  
- Palavras-chave em **negrito**.  
- Par√°grafos apenas quando indispens√°vel (m√°x. 2 linhas).  

Regras: sem links; s√∫mulas s√≥ se 100% seguras; n√£o citar n√∫meros de processos/ac√≥rd√£os.  

Fecho: resumo final em 1 frase para refor√ßo de memoriza√ß√£o.`
    };

    const strategyEl = document.getElementById('strategy');
    const themeEl = document.getElementById('theme');
    const resultEl = document.getElementById('result');
    const btnGen = document.getElementById('generate');
    const btnCopy = document.getElementById('copy');
    const btnReset = document.getElementById('reset');

    btnGen.addEventListener('click', generate);
    btnCopy.addEventListener('click', copyOut);
    btnReset.addEventListener('click', resetAll);
    themeEl.addEventListener('keydown', (e)=>{ if((e.ctrlKey||e.metaKey)&&e.key.toLowerCase()==='enter'){generate();}});

    function strategyHumanName(v){
      const map={
        explicacao:'Explica√ß√£o B√°sica', resumo:'Resumo Objetivo', artigo:'An√°lise Detalhada', aplicacao:'Aplica√ß√£o Pr√°tica',
        simulado:'Exerc√≠cios/Testes', faq:'FAQ', debate:'Debate/Reflex√£o', atualizacao:'Contexto Atualizado',
        plano:'Plano de Estudo', apresentacao:'Apresenta√ß√£o Oral', jurisprudencia:'Jurisprud√™ncia', slide:'Slide'
      }; return map[v]||v;
    }

    function generate(){
      const s = strategyEl.value; const t = (themeEl.value||'').trim();
      if(!s){ alert('Selecione o objetivo.'); return; }
      if(!t){ alert('Digite o tema.'); themeEl.focus(); return; }
      const tpl = TEMPLATES[s]; if(!tpl){ alert('Estrat√©gia inv√°lida.'); return; }
      const out = tpl(t);
      resultEl.value = out;

      // Atualiza Book local automaticamente (m√°x. 500)
      let bookData=[]; 
      try{ bookData = JSON.parse(localStorage.getItem('book_data_v1')||'[]'); if(!Array.isArray(bookData)) bookData=[]; }catch{ bookData=[]; }
      const entry = { objetivo: strategyHumanName(s), tema: t, prompt: out, ts: Date.now() };
      bookData.unshift(entry);
      if(bookData.length>500) bookData = bookData.slice(0,500);
      try{ localStorage.setItem('book_data_v1', JSON.stringify(bookData)); }catch{}

      // Se Book estiver aberto, re-renderiza
      if(document.getElementById('tab-book').classList.contains('is-active')){ clearBookUI(); renderBatch(); }

      window.scrollTo({top:document.body.scrollHeight, behavior:'smooth'});
    }

    async function copyOut(){
      if(!resultEl.value) return alert('Nada para copiar.');
      try{
        await navigator.clipboard.writeText(resultEl.value);
        const old = btnCopy.textContent; btnCopy.textContent='COPIADO'; btnCopy.disabled=true;
        setTimeout(()=>{ btnCopy.textContent=old; btnCopy.disabled=false; }, 1500);
      }catch{
        const ta = document.createElement('textarea'); ta.value = resultEl.value; ta.style.position='fixed'; ta.style.opacity='0';
        document.body.appendChild(ta); ta.focus(); ta.select();
        try{ document.execCommand('copy'); const old = btnCopy.textContent; btnCopy.textContent='COPIADO'; btnCopy.disabled=true; setTimeout(()=>{ btnCopy.textContent=old; btnCopy.disabled=false; }, 1500); }
        catch{ alert('N√£o foi poss√≠vel copiar. Selecione e use Ctrl/Cmd+C.'); }
        finally{ document.body.removeChild(ta); }
      }
    }

    function resetAll(){ strategyEl.value=''; themeEl.value=''; resultEl.value=''; window.scrollTo({top:0,behavior:'smooth'}); }

    // ===== Book ‚Äî persist√™ncia local (localStorage) =====
    const BOOK_KEY='book_data_v1';
    const PAGE_SIZE=10;
    let bookData=[]; let bookCursor=0; const bookWrap=document.getElementById('book-list');

    function loadBook(){ try{ bookData = JSON.parse(localStorage.getItem(BOOK_KEY)||'[]'); if(!Array.isArray(bookData)) bookData=[]; }catch{ bookData=[]; } }
    function saveBook(){ try{ localStorage.setItem(BOOK_KEY, JSON.stringify(bookData)); }catch{} }
    function truncate150(s){return (s||'').length>150?s.slice(0,150)+'‚Ä¶':s}

    function clearBookUI(){ if(bookWrap){ bookWrap.innerHTML=''; bookCursor=0; } }
    function renderBatch(){
      if(!bookWrap) return; const end=Math.min(bookCursor+PAGE_SIZE, bookData.length); const frag=document.createDocumentFragment();
      for(let i=bookCursor;i<end;i++){
        const {objetivo,tema,prompt}=bookData[i];
        const el=document.createElement('div'); el.className='book-item';
        el.innerHTML=`<div class="book-meta"><div class="book-obj">${objetivo||'‚Äî'}</div><div class="book-tema">${truncate150(tema||'')}</div></div><div><button class="chipbtn" data-prompt="${String(prompt||'').replace(/"/g,'&quot;')}">Copiar</button></div>`;
        frag.appendChild(el);
      }
      bookWrap.appendChild(frag); bookCursor=end;
    }
    function onScroll(){ if(!bookWrap) return; const near=bookWrap.scrollTop+bookWrap.clientHeight>=bookWrap.scrollHeight-8; if(near && bookCursor<bookData.length) renderBatch(); }
    bookWrap?.addEventListener('scroll', onScroll);

    // carrega quando abrir a aba Book
    const _activate=activateTab; activateTab=function(id){ _activate(id); if(id==='book'){ if(!bookData.length){ loadBook(); } if(bookCursor===0){ renderBatch(); } } }

    // Copiar (delega√ß√£o Book)
    document.addEventListener('click',async e=>{
      const btn=e.target.closest('.chipbtn'); if(!btn||!btn.dataset.prompt) return;
      try{ await navigator.clipboard.writeText(btn.dataset.prompt); btn.textContent='Copiado!'; setTimeout(()=>btn.textContent='Copiar',1200);}catch{ alert('N√£o foi poss√≠vel copiar.'); }
    });
  </script>
</body>
</html>
