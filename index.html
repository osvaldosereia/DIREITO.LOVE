<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>direito.love — Prompt</title>
  <meta name="theme-color" content="#F5C400" />
  <meta name="description" content="direito.love — Criador de Prompts para estudo jurídico, OAB e concursos." />
  <meta name="keywords" content="direito, OAB, concursos, súmulas, jurisprudência, estudo jurídico" />
  <meta name="author" content="direito.love" />
  <meta name="robots" content="index, follow" />
  <link rel="icon" href="favicon.png" type="image/png" />
  <link rel="apple-touch-icon" href="favicon-180.png" />
  <link rel="manifest" href="manifest.json">

  <style>
    :root{
      --bg:#FFFDF0; --surface:#ffffff; --text:#001840; --muted:#6b7280; --border:#e5e7eb;
      --primary:#102A71; --highlight:#F5C400; --highlight-light:#FFDC5F;
      --radius:14px; --shadow:0 4px 16px rgba(0,0,0,.06);
      --font:-apple-system,BlinkMacSystemFont,"Inter","Segoe UI",Roboto,system-ui,sans-serif;
      --mono: ui-monospace, Menlo, Consolas, "Liberation Mono", monospace;
      --safe-bottom: env(safe-area-inset-bottom, 0px);
      --prompt-width: 900px;
    }

    *{ box-sizing: border-box }
    html,body{ margin:0; padding:0; background: var(--bg); color: var(--text); font: 500 14px/1.4 var(--font); }

    /* Topbar */
    .topbar{ position: sticky; top: 0; z-index: 50; background: var(--highlight); border-bottom:1px solid rgba(0,0,0,.08); }
    .topbar__inner{ max-width:1160px; margin:0 auto; padding:8px 12px; display:flex; align-items:center; justify-content:space-between; gap:12px; transition: padding .15s ease; }
    .topbar.is-scrolled .topbar__inner{ padding:6px 12px; }
    .brand{ display:flex; align-items:center; gap:10px; text-decoration:none; color:#111; }
    .brand__logo{ height:36px }

    .chip{ padding:6px 14px; border-radius:20px; background:#fff; border:1px solid var(--border); font-size:13px; color:var(--primary); text-decoration:none; font-weight:600; transition:.15s }
    .chip:hover{ background:var(--highlight-light) }

    /* Layout */
    .wrap{ width: min(1160px, 100% - 24px); margin: 0 auto; padding: 18px 0 48px; }
    .main-grid{ display:grid; grid-template-columns: 1fr 380px; gap:16px; align-items:start; }
    @media (max-width: 900px){
      .main-grid{ grid-template-columns: 1fr; }
    }

    .card{
      background: var(--surface); border:1px solid var(--border); border-radius: var(--radius); box-shadow: var(--shadow);
      padding: 16px;
    }

    /* Builder */
    .builder h2{ font-size: 18px; margin: 0 0 10px 0; color: var(--primary) }
    label[for=tema], .section-title{ font-size:14px; color:var(--primary); margin:8px 0 }
    input[type="text"]{
      width:100%; padding:12px; border-radius:10px; border:2px solid var(--primary); background:#fff; color:var(--text); font-size:15px;
    }
    input[type="text"]::placeholder{ color:#9aa3b2 }

    .sessao-lista{
      display:grid; grid-template-columns: 1fr 1fr; gap:8px 20px; margin: 8px 0 12px;
    }
    .sessao-lista li{ list-style:none; padding:6px 0; display:flex; gap:8px; align-items:flex-start; }
    .sessao-lista label{ font-weight:600; cursor:pointer; }
    @media (max-width: 900px){
      .sessao-lista{ grid-template-columns: 1fr; gap:8px; }
    }

    .actions{ display:flex; gap: 10px; margin-top: 12px; }
    .btn{
      appearance:none; -webkit-appearance:none; cursor:pointer; border:1px solid var(--border);
      background: #fff; color: var(--text); border-radius: 9999px; padding: 10px 16px; font-weight:700;
    }
    .btn.primary{ background: var(--primary); color:#fff; border-color: #102A71 }
    .btn:hover{ box-shadow: var(--shadow) }
    .btn:disabled{ opacity:.6; cursor:not-allowed; box-shadow:none }

    /* Sticky CTA (mobile) */
    @media (max-width:480px){
      #criar.sticky-cta{
        position: fixed; left: 50%; transform: translateX(-50%);
        bottom: calc(14px + var(--safe-bottom)); z-index: 9999;
        border-radius: 9999px; padding: 12px 18px;
        box-shadow: 0 12px 28px rgba(0,0,0,.18);
      }
      .builder{ padding-bottom: 90px; } /* espaço pro botão flutuante */
    }

    /* Aside (Resultado) */
    .aside{ position: sticky; top: 64px; }
    .aside h3{ margin:0 0 8px; font-size: 16px; color: var(--primary) }
    .muted{ color: var(--muted) }
    .out{
      margin-top: 8px; padding:8px; border:1px dashed var(--border); border-radius: 10px;
      background:#fff; color:#999; display:flex; min-height: 120px;
      align-items:center; justify-content:center; font-size:13px;
    }
    textarea#saida{
      width:min(var(--prompt-width),100%);min-height:30vh;resize:vertical;padding:10px 12px;border-radius:10px;border:1px solid var(--border);
      background:#fff;color:#001840;font-family:var(--mono);font-size:13.5px;display:block
    }
    .aside .btns{ display:flex; gap:10px; margin-top:10px }

    /* Achados da pesquisa (painel que aparece ao voltar da pesquisa) */
    #dl-box-achados code{ background:#f1f5f9; padding:1px 4px; border-radius:6px; }
    #dl-box-achados ul{ margin:0 0 8px 18px; padding:0; }
  </style>
</head>
<body>
  <header class="topbar" role="banner">
    <div class="topbar__inner">
      <a class="brand" href="index.html" aria-label="Início">
        <img class="brand__logo" src="icons/logo.png" alt="direito.love" />
      </a>
      <nav class="topbar__actions" aria-label="Ações">
        <a class="chip" href="index.html">Prompt</a>
        <a class="chip" href="pesquisa.html">Pesquisar</a>
      </nav>
    </div>
  </header>

  <div class="wrap">
    <div class="main-grid">
      <!-- Coluna esquerda: Builder -->
      <main class="builder card">
        <h2>Criador de Prompts para Estudantes de Direito</h2>

        <label for="tema">Tema</label>
        <input id="tema" placeholder="Digite aqui o Tema. Seja específico." autocomplete="off" />

        <div class="section-title"><b>Selecione como quer estudar:</b></div>
        <ul class="sessao-lista">
          <li><input type="checkbox" id="s1" /><label for="s1">Conceitos e Definições</label></li>
          <li><input type="checkbox" id="s2" /><label for="s2">Base Legal Essencial</label></li>
          <li><input type="checkbox" id="s3" /><label for="s3">Jurisprudência Majoritária</label></li>
          <li><input type="checkbox" id="s4" /><label for="s4">Doutrina Relevante</label></li>
          <li><input type="checkbox" id="s5" /><label for="s5">Exemplos e Casos Práticos</label></li>
          <li><input type="checkbox" id="s6" /><label for="s6">Quadro Comparativo</label></li>
          <li><input type="checkbox" id="s7" /><label for="s7">Questões de Fixação</label></li>
          <li><input type="checkbox" id="s8" /><label for="s8">Debates, Críticas e Tendências</label></li>
          <li><input type="checkbox" id="s9" /><label for="s9">Súmulas e Enunciados</label></li>
          <li><input type="checkbox" id="s10" /><label for="s10">Estrutura de Peça / Modelos</label></li>
          <li><input type="checkbox" id="s11" /><label for="s11">Raciocínio Jurídico (passo a passo)</label></li>
          <li><input type="checkbox" id="s12" /><label for="s12">Mapa Mental</label></li>
          <li><input type="checkbox" id="s13" /><label for="s13">Checklist de Peça</label></li>
          <li><input type="checkbox" id="s14" /><label for="s14">Flashcards</label></li>
          <li><input type="checkbox" id="s15" /><label for="s15">Atualizações / Tendências</label></li>
          <li><input type="checkbox" id="s16" /><label for="s16">Casos Reais</label></li>
        </ul>

        <div class="actions">
          <button class="btn primary" id="criar" disabled>Criar Prompt</button>
          <button class="btn" id="limpar">Limpar</button>
        </div>
      </main>

      <!-- Coluna direita: Resultado -->
      <aside class="aside card">
        <h3>Resultado</h3>
        <div id="out" class="out muted">(vazio)</div>
        <textarea id="saida" style="display:none" aria-label="Saída do prompt"></textarea>
        <div class="btns">
          <button class="btn" id="copiar">Copiar</button>
          <button class="btn" id="novo">Novo</button>
        </div>
      </aside>
    </div>
  </div>

  <div id="toast" class="toast" aria-live="polite"
       style="position:fixed;left:50%;transform:translateX(-50%);bottom:18px;background:#111;color:#fff;padding:8px 12px;border-radius:999px;opacity:0;transition:.2s;z-index:60">
  </div>

<script>
/* ====== UI base ====== */
(function(){
  const $=(s,r=document)=>r.querySelector(s);
  const $$=(s,r=document)=>[...r.querySelectorAll(s)];
  const temaEl=$("#tema");
  const criarBtn=$("#criar");
  const limparBtn=$("#limpar");
  const saida=$("#saida");
  const out=$("#out");
  const copiar=$("#copiar");
  const novo=$("#novo");
  const toast=(msg,t=1400)=>{const el=$("#toast");el.textContent=msg;el.style.opacity=1;setTimeout(()=>el.style.opacity=0,t);};

  // Topbar shrink
  window.addEventListener('scroll', ()=> {
    document.querySelector('.topbar').classList.toggle('is-scrolled', window.scrollY > 6);
  });

  // Habilita CTA e liga sticky no mobile quando habilitar
  function updateCTA(){
    const checked=[...$$(".sessao-lista input:checked")];
    criarBtn.disabled = !(temaEl.value.trim() && checked.length);
    if (window.matchMedia("(max-width:480px)").matches){
      criarBtn.classList.toggle("sticky-cta", !criarBtn.disabled);
    }
  }

  temaEl.addEventListener("input", updateCTA);
  $$(".sessao-lista input").forEach(i=> i.addEventListener("change", updateCTA));
  updateCTA();

  function showOut(text){
    out.style.display="none";
    saida.style.display="block";
    saida.value = text;
    saida.focus();
  }

  // monta prompt simples com base nas seções marcadas
  function buildPrompt(tema, ids){
    const tit = (s)=>`### ${s}\n`;
    const m = {
      s1: 'Conceitos e Definições',
      s2: 'Base Legal Essencial',
      s3: 'Jurisprudência Majoritária',
      s4: 'Doutrina Relevante',
      s5: 'Exemplos e Casos Práticos',
      s6: 'Quadro Comparativo',
      s7: 'Questões de Fixação',
      s8: 'Debates, Críticas e Tendências',
      s9: 'Súmulas e Enunciados',
      s10: 'Estrutura de Peça / Modelos',
      s11: 'Raciocínio Jurídico (passo a passo)',
      s12: 'Mapa Mental',
      s13: 'Checklist de Peça',
      s14: 'Flashcards',
      s15: 'Atualizações / Tendências',
      s16: 'Casos Reais'
    };
    const blocos = ids.map(id => tit(m[id]) + "- (preencher com o conteúdo gerado)\n");
    return `## Tema\n${tema}\n\n${blocos.join('\n')}`;
  }

  criarBtn.addEventListener("click", ()=>{
    const tema = (temaEl.value||"").trim();
    const ids = $$(".sessao-lista input:checked").map(i=>i.id);
    const txt = buildPrompt(tema, ids);
    showOut(txt);
    toast("Prompt gerado!");
  });

  limparBtn.addEventListener("click", ()=>{
    temaEl.value = "";
    $$(".sessao-lista input:checked").forEach(i=> i.checked=false);
    saida.value = "";
    saida.style.display="none";
    out.style.display="flex";
    out.textContent = "(vazio)";
    updateCTA();
  });

  copiar.addEventListener("click", async()=>{
    const txt = saida.style.display==="block" ? saida.value : out.textContent;
    try{ await navigator.clipboard.writeText(txt||""); toast("Copiado!"); }catch{ toast("Erro ao copiar."); }
  });

  novo.addEventListener("click", ()=>{
    saida.value = "";
    saida.focus();
    toast("Novo documento");
  });
})();
</script>

<script>
/* ====== PWA opcional ====== */
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register("service-worker.js")
    .then(()=>console.log("SW ok"))
    .catch(err=>console.warn("SW erro:", err));
}
</script>

<script>
/* ====== direito.love — index-importa-pesquisa.js (INSERE NO TEMA) ======
   Lê 'dl_pesquisa_selecionados' do localStorage (definido na pesquisa),
   mostra painel com preview expandível e insere o texto COMPLETO no #tema. */
(() => {
  const KEY = 'dl_pesquisa_selecionados';
  const $ = (s, r=document)=>r.querySelector(s);
  const get = () => JSON.parse(localStorage.getItem(KEY) || '[]');
  const set = (arr) => localStorage.setItem(KEY, JSON.stringify(arr));
  const esc = (s='') => String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
  const snip = (s='', n=260) => { const t=String(s).replace(/\s+/g,' ').trim(); return t.length>n ? t.slice(0,n)+'…' : t; };

  function renderBox(items) {
    if (!items.length || $('#dl-box-achados')) return;

    const box = document.createElement('section');
    box.id = 'dl-box-achados';
    box.className = 'card';
    box.innerHTML = `
      <style>
        #dl-box-achados h3{ margin:0 0 8px 0; font-size:15px; color:var(--primary) }
        #dl-box-achados ul{ margin:0 0 10px 18px; padding:0; }
        #dl-box-achados li{ margin:6px 0; }
        #dl-box-achados details > summary{ cursor:pointer; list-style:revert; }
        #dl-box-achados pre.dl-full{ white-space:pre-wrap; background:#fff; border:1px solid #e5e5e5; padding:8px; border-radius:8px; margin-top:6px; max-height:50vh; overflow:auto; }
        #dl-box-achados .actions{ display:flex; gap:8px; margin-top:10px; }
        #dl-inserir{ border:1px solid #0f3b9e; background:#0f3b9e; color:#fff; padding:8px 12px; border-radius:10px; cursor:pointer; }
        #dl-inserir:hover{ filter:brightness(1.05); }
        #dl-limpar{ border:1px solid #dc2626; background:#ef4444; color:#fff; padding:8px 12px; border-radius:10px; cursor:pointer; }
        #dl-limpar:hover{ filter:brightness(1.05); }
      </style>
      <h3>🔎 Achados da pesquisa (${items.length})</h3>
      <ul>
        ${items.map(i => i.texto
          ? `<li>
               <details>
                 <summary><strong>${(i.fonte||'').toUpperCase()}</strong> — ${snip(i.texto, 260)}</summary>
                 <pre class="dl-full">${esc(i.texto)}</pre>
               </details>
             </li>`
          : `<li>${i.title ? esc(i.title)+' — ' : ''}${i.url ? `<a href="${i.url}" target="_blank" rel="noopener">${esc(i.url)}</a>` : ''}</li>`
        ).join('')}
      </ul>
      <div class="actions">
        <button id="dl-inserir">Inserir no tema</button>
        <button id="dl-limpar">Descartar</button>
      </div>
    `;

    const container = document.querySelector('.builder') || document.querySelector('main') || document.body;
    container.insertBefore(box, container.firstChild);

    // Inserir no campo #tema (linha única); fallback: #saida
    $('#dl-inserir').addEventListener('click', () => {
      const itens = get();
      const tema = document.getElementById('tema');
      const saida = document.getElementById('saida');

      const full = itens.map(i => i.texto
        ? i.texto
        : [i.title || '', i.url || ''].filter(Boolean).join(' — ')
      ).join('\n\n');

      const oneLine = full.replace(/\s*\n+\s*/g, ' ').replace(/\s{2,}/g, ' ').trim();

      if (tema) {
        tema.removeAttribute('maxlength'); // garante sem corte
        tema.value = (tema.value ? (tema.value + ' ') : '') + oneLine;
        tema.focus();
        tema.dispatchEvent(new Event('input', {bubbles:true})); // revalida CTA
      } else if (saida) {
        const sep = (saida.value||'').trim() ? '\n\n' : '';
        saida.value = (saida.value || '') + sep + full + '\n';
        saida.focus();
      } else {
        alert("Campo 'Tema' não encontrado.");
      }

      localStorage.removeItem(KEY);
      document.getElementById('dl-box-achados')?.remove();
    });

    $('#dl-limpar').addEventListener('click', () => {
      localStorage.removeItem(KEY);
      document.getElementById('dl-box-achados')?.remove();
    });
  }

  document.addEventListener('DOMContentLoaded', () => {
    const tema = document.getElementById('tema');
    if (tema) tema.removeAttribute('maxlength');

    const itens = get();
    if (location.hash === '#pesquisa' || itens.length) {
      // de-dup leve
      const uniq=[]; const seen=new Set();
      itens.forEach(i => {
        const k = i.id || (i.fonte+':'+(i.texto||'').slice(0,50));
        if(!seen.has(k)){ seen.add(k); uniq.push(i); }
      });
      set(uniq);
      renderBox(uniq);
    }
  });
})();
</script>
</body>
</html>
