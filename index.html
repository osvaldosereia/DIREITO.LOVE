<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>direito.love</title>

  <!-- Tema r√°pido antes do CSS (evita flash e corrige barra no Android/iOS) -->
  <script>
  (function () {
    try {
      var prefs = JSON.parse(localStorage.getItem('prefs') || '{}');
      var t = prefs.theme || 'auto';
      var eff = (t === 'auto')
        ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light')
        : t;
      document.documentElement.setAttribute('data-theme', eff);
      var meta = document.querySelector('meta[name="theme-color"][data-live]');
      if (!meta) {
        meta = document.createElement('meta');
        meta.setAttribute('name', 'theme-color');
        meta.setAttribute('data-live', '1');
        document.head.appendChild(meta);
      }
      meta.setAttribute('content', eff === 'dark' ? '#15181c' : '#e9eaee');
    } catch (e) {}
  })();
  </script>

  <!-- Tema do navegador -->
  <meta name="theme-color" content="#f5f6f8" media="(prefers-color-scheme: light)">
  <meta name="theme-color" content="#0f1113" media="(prefers-color-scheme: dark)">

  <!-- PWA -->
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- √çcones -->
  <link rel="apple-touch-icon" sizes="180x180" href="icons/pwa-180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="icons/pwa-192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="icons/pwa-512.png">
  <link rel="icon" type="image/png" sizes="1024x1024" href="icons/pwa-1024.png">
  <link rel="shortcut icon" href="icons/favicon.ico" type="image/x-icon">

  <!-- CSS -->
  <link rel="stylesheet" href="styles.css?v=8">
</head>
<body>
  <header class="topbar" role="banner">
    <div class="container nav">
      <div class="brand" aria-label="direito.love">
        <img src="icons/logo.svg" alt="Logo do direito.love" class="logo" />
        <strong class="title">direito.love</strong>
      </div>
      <nav class="actions" aria-label="A√ß√µes principais">
        <!-- Hist√≥rico -->
        <a class="iconbtn" href="arquivo.html" 
           title="Hist√≥rico" aria-label="Abrir hist√≥rico local">
          <img src="icons/home.svg" alt="Hist√≥rico">
        </a>
        <!-- Nova pesquisa -->
        <button class="iconbtn" id="btn-new" 
                title="Novo Tema" aria-label="Iniciar novo tema">
          <img src="icons/refresh.svg" alt="Novo tema" />
        </button>
        <!-- Configura√ß√µes -->
        <button class="iconbtn" id="btn-settings" 
                title="Configura√ß√µes" aria-label="Abrir configura√ß√µes">
          <img src="icons/filter.svg" alt="Configura√ß√µes">
        </button>
      </nav>
    </div>
  </header>

  <main class="container app" role="main">
    <section id="chat" class="chat" role="list" aria-label="Conversa">
      <div id="messages" class="messages" aria-live="polite" aria-relevant="additions"></div>
    </section>
  </main>

  <footer class="container footer" role="contentinfo">
    <span class="small">üíö direito.love ‚Äî seu assistente de estudos jur√≠dicos</span>
  </footer>

  <!-- Modal de Configura√ß√µes -->
  <dialog id="settings-modal" class="settings-modal" aria-labelledby="settings-title">
    <form method="dialog" class="settings-card">
      <div class="settings-header">
        <img src="icons/filter.svg" alt="Configura√ß√µes">
        <h3 id="settings-title">Configura√ß√µes</h3>
      </div>

      <div class="settings-row">
        <span>Haptics</span>
        <label class="toggle">
          <input type="checkbox" id="opt-haptics" aria-label="Ativar ou desativar feedback t√°til"/>
          <span class="slider"></span>
        </label>
      </div>

      <div class="settings-row">
        <label for="opt-theme">Tema</label>
        <select id="opt-theme" aria-label="Selecionar tema do aplicativo">
          <option value="auto">Autom√°tico</option>
          <option value="light">Claro</option>
          <option value="dark">Escuro</option>
        </select>
      </div>

      <div class="settings-row">
        <span>Lembrete di√°rio</span>
        <label class="toggle">
          <input type="checkbox" id="opt-daily" aria-label="Ativar lembrete di√°rio de estudo"/>
          <span class="slider"></span>
        </label>
      </div>

      <div class="settings-row">
        <a href="politica.html" target="_blank" rel="noopener">Pol√≠tica de Privacidade</a>
      </div>

      <div class="settings-actions">
        <button class="btn" value="cancel">Fechar</button>
      </div>
    </form>
  </dialog>

  <!-- JS principal -->
  <script src="app.js?v=8" defer></script>
</body>
</html>
