<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>direito.love ‚Äî Gerar Prompts</title>
  <meta name="theme-color" content="#0c4160" />
  <!-- PWA -->
  <link rel="manifest" href="./manifest.json">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <link rel="apple-touch-icon" href="./icons/icon-192.png" />
  <link rel="apple-touch-icon" sizes="192x192" href="./icons/icon-192.png">
  <link rel="apple-touch-icon" sizes="512x512" href="./icons/icon-512.png">
  <style>
    :root {
      --bg: #f6f7fb;
      --surface: #ffffff;
      --ink: #0f172a;
      --muted: #6b7280;
      --border: #e5e7eb;
      --primary: #0c4160;
      --primary-2: #0e567c;
      --chip: #eef6ff;
      --success: #0ea5e9;
      --radius: 22px;
      --elev-1: 0 8px 30px rgba(15, 23, 42, .08);
      --fs-h: clamp(22px, 4vw, 42px);
      --fs-b: clamp(14px, 1.8vw, 16px);
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      background:
        radial-gradient(1200px 800px at 0% -20%, #eaf7f5 0%, transparent 60%),
        radial-gradient(800px 600px at 110% 10%, #f1f6fb 0%, transparent 55%),
        var(--bg);
      color: var(--ink);
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      font-size: var(--fs-b);
    }
    .wrap { max-width: 960px; margin: 0 auto; padding: 28px 16px 96px; }
    .top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 18px; }
    .brand { display: flex; align-items: center; gap: 12px; }
    .logo { display: block; width: auto; height: 40px; border-radius: 10px; }
    @media (min-width: 880px) { .logo { height: 48px; } }

    /* Tabs */
    .tabs { display: flex; gap: 8px; margin: 8px 0 18px; }
    .tab {
      all: unset; border: 1px solid var(--border); background: #fff;
      padding: 8px 14px; border-radius: 999px; cursor: pointer; font-weight: 700;
    }
    .tab[aria-selected="true"]{ background: var(--primary); color: #fff; border-color: transparent; }

    .card { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius); box-shadow: var(--elev-1); padding: 22px; }
    .title { font-weight: 700; font-size: var(--fs-h); line-height: 1.05; margin: 0 0 6px; }
    .subtitle { color: var(--muted); margin: 0 0 16px; }

    .row { display: grid; gap: 12px; grid-template-columns: 1fr; }
    .field {
      width: 100%; border: 1px solid var(--border); background: #f4f7fb;
      border-radius: 16px; padding: 14px 16px; outline: none; color: var(--ink);
    }
    .field:focus { border-color: #b9c6d1; box-shadow: 0 0 0 3px rgba(14, 86, 124, .12); }

    .btn {
      all: unset; display: inline-flex; align-items: center; justify-content: center;
      gap: 8px; padding: 12px 16px; border-radius: 14px; font-weight: 700; cursor: pointer;
    }
    .btn-primary { background: var(--primary); color: #fff; }
    .btn-primary:hover { background: var(--primary-2); }
    .btn-ghost { border: 1px solid var(--border); background: #fff; color: var(--ink); }

    .thinking { display: none; align-items: center; gap: 10px; margin-top: 16px; color: #0a2430; }
    .dot { width: 8px; height: 8px; border-radius: 999px; background: var(--primary); opacity: .6; animation: bounce .9s infinite; }
    .dot:nth-child(2){ animation-delay: .15s; }
    .dot:nth-child(3){ animation-delay: .3s; }
    @keyframes bounce{ 0%,80%,100%{ transform: translateY(0); opacity: .3 } 40%{ transform: translateY(-6px); opacity:1 } }

    .result { display: none; margin-top: 18px; }
    .lead { font-weight: 600; margin: 0 0 10px; }
    .copygrid { display: grid; gap: 10px; grid-template-columns: 1fr; }
    .copy-btn {
      all: unset; display: flex; align-items: center; justify-content: space-between;
      padding: 14px 16px; border: 1px solid var(--border); border-radius: 14px; background: #fff; cursor: pointer;
    }
    .copy-btn .lbl{ font-weight: 700; }
    .copy-btn .hint{ color: var(--muted); font-size: .95em; }
    .copy-btn:active{ transform: translateY(1px); }

    .divider { height: 1px; background: var(--border); margin: 18px 0; }
    .again { display: flex; justify-content: center; margin-top: 16px; }

    /* PWA CTA */
    .install-wrap{ display: flex; justify-content: center; margin: 22px 0 8px; }
    .install-cta{
      background: var(--primary); color: #fff; border-radius: 18px; padding: 16px 22px;
      font-size: 18px; font-weight: 700; box-shadow: 0 10px 30px rgba(12,65,96,.18)
    }
    .install-cta:hover{ background: var(--primary-2); }
    .install-cta-wrap{ display: flex; flex-direction: column; align-items: center; gap: 6px; }
    .install-note{ color: var(--muted); font-size: 14px; text-align: center; }

    /* IA footer */
    .ai-footer{ padding: 18px 0 28px; }
    .ai-links{ display: flex; flex-wrap: wrap; gap: 12px; justify-content: center; }
    .ai-link{
      all: unset; display: inline-flex; align-items: center; justify-content: center;
      background: var(--primary); color: #fff; padding: 6px 10px; border-radius: 999px;
      font-size: 12px; font-weight: 600; opacity: .95; cursor: pointer; transition: opacity .2s;
    }
    .ai-link:hover{ opacity: 1; }
    @media (min-width: 880px){ .ai-link{ font-size: 12.5px; } }

    /* Arquivo */
    .list{ display: grid; gap: 10px; }
    .item{ display: flex; justify-content: space-between; align-items: flex-start; gap: 12px; border: 1px solid var(--border); background: #fff; border-radius: 14px; padding: 12px 14px; }
    .meta{ display: grid; gap: 4px; min-width: 0; }
    .obj{ font-weight: 700; }
    .tema{ color: var(--ink); }

    .sr-only{
      position: absolute !important; width: 1px; height: 1px; padding: 0; margin: -1px;
      overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0;
    }

    @media (min-width: 880px){
      .row{ grid-template-columns: 1fr auto; }
      .btn-primary{ padding-left: 22px; padding-right: 22px; }
      .copygrid{ grid-template-columns: 1fr 1fr; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header class="top">
      <div class="brand">
        <img class="logo" src="./icons/logo-menu.png" onerror="this.onerror=null;this.src='./icons/icon-192.png'" alt="direito.love" />
      </div>
      <a class="btn btn-ghost" href="https://www.instagram.com/osvaldosereiajr/" target="_blank" rel="noopener" aria-label="Abrir Instagram do autor">Instagram</a>
    </header>

    <nav class="tabs" role="tablist" aria-label="Navega√ß√£o">
      <button class="tab" id="tab-gerar" aria-controls="panel-gerar" aria-selected="true">Gerar</button>
      <button class="tab" id="tab-arquivo" aria-controls="panel-arquivo" aria-selected="false">Arquivo</button>
    </nav>

    <!-- Painel: Gerar -->
    <section id="panel-gerar" class="card" role="tabpanel" aria-labelledby="tab-gerar">
      <h1 class="title">Gerar Prompts</h1>
      <p class="subtitle">Digite apenas o tema que eu fa√ßo a m√°gica</p>

      <div class="row">
        <input id="tema" class="field" type="text" placeholder="Ex.: Crit√©rios do STJ para fixar dano moral por negativa√ß√£o indevida" aria-label="Tema" />
        <button id="gerar" class="btn btn-primary">GERAR PROMPTS</button>
      </div>

      <div id="thinking" class="thinking" aria-live="polite">
        <span class="sr-only">Processando‚Ä¶</span>
        <div class="dot"></div><div class="dot"></div><div class="dot"></div>
        <span>pensando‚Ä¶</span>
      </div>

      <section id="result" class="result">
        <p class="lead">Criei 4 prompts para que voc√™ tenha um resultado ainda melhor nos seus estudos.</p>
        <div class="copygrid">
          <button class="copy-btn" id="copy-aprender"><span class="lbl">APRENDER</span> <span class="hint">copiar</span></button>
          <button class="copy-btn" id="copy-treinar"><span class="lbl">TREINAR</span> <span class="hint">copiar</span></button>
          <button class="copy-btn" id="copy-noticias"><span class="lbl">NOT√çCIAS</span> <span class="hint">copiar</span></button>
          <button class="copy-btn" id="copy-casoreal"><span class="lbl">CASO REAL</span> <span class="hint">copiar</span></button>
        </div>
        <div class="divider"></div>
        <div class="again">
          <button id="reset" class="btn btn-primary">Nova Pesquisa</button>
        </div>
      </section>
    </section>

    <!-- CTA de instala√ß√£o -->
    <div class="install-wrap">
      <div class="install-cta-wrap">
        <button id="btn-install" class="btn install-cta" style="display:none">Instalar app</button>
        <div id="install-note" class="install-note" style="display:none">Instale para usar offline e abrir mais r√°pido</div>
      </div>
    </div>

    <!-- Painel: Arquivo -->
    <section id="panel-arquivo" class="card" role="tabpanel" aria-labelledby="tab-arquivo" hidden>
      <h2 class="title" style="font-size:26px">Arquivo ‚Äî √∫ltimas 50 pesquisas</h2>
      <p class="subtitle">Clique em "Copiar" para enviar o prompt ao clipboard.</p>
      <div id="book-list" class="list"></div>
    </section>
  </div>

  <footer class="ai-footer" aria-label="Ferramentas de IA">
    <div class="ai-links">
      <a class="ai-link" href="https://chat.openai.com/" target="_blank" rel="noopener" aria-label="Abrir ChatGPT">GPT</a>
      <a class="ai-link" href="https://gemini.google.com/" target="_blank" rel="noopener" aria-label="Abrir Gemini">Gemini</a>
      <a class="ai-link" href="https://www.perplexity.ai/" target="_blank" rel="noopener" aria-label="Abrir Perplexity">Perplexity</a>
      <a class="ai-link" href="https://www.phind.com/" target="_blank" rel="noopener" aria-label="Abrir Phind">Phind</a>
      <a class="ai-link" href="https://notebooklm.google.com/" target="_blank" rel="noopener" aria-label="Abrir NotebookLM">NotebookLM</a>
      <a class="ai-link" href="https://consensus.app/" target="_blank" rel="noopener" aria-label="Abrir Consensus">Consensus</a>
    </div>
  </footer>

  <script>
    // ===== Navega√ß√£o de abas =====
    const tabGerar = document.getElementById('tab-gerar');
    const tabArq = document.getElementById('tab-arquivo');
    const panelGerar = document.getElementById('panel-gerar');
    const panelArq = document.getElementById('panel-arquivo');
    function selectTab(which){
      const gerar = which === 'gerar';
      tabGerar.setAttribute('aria-selected', gerar);
      tabArq.setAttribute('aria-selected', !gerar);
      panelGerar.hidden = !gerar;
      panelArq.hidden = gerar;
      if(!gerar) renderBookAll();
    }
    tabGerar.addEventListener('click', () => selectTab('gerar'));
    tabArq.addEventListener('click', () => selectTab('arquivo'));

    // ===== Templates =====
    const CTA = `\n\n**Gere um novo prompt em [direito.love](https://direito.love)**`;
    const Templates = {
      aprender: (tema) => `Voc√™ √© um professor universit√°rio de Direito, com experi√™ncia em doc√™ncia e atua√ß√£o pr√°tica.

Seu papel √© ensinar **${tema}** com profundidade, mas de forma did√°tica e acess√≠vel para estudantes iniciantes ou intermedi√°rios. Nada de resposta rasa ou engessada.

**Estilo de resposta:**
- Comece **diretamente com o conceito**, sem introdu√ß√µes vazias.
- Linguagem clara e objetiva, mas com profundidade.
- Quando houver diverg√™ncia doutrin√°ria ou jurisprudencial, traga **somente os entendimentos majorit√°rios** (STJ/STF).
- Conecte a explica√ß√£o √† pr√°tica forense: como o tema aparece na advocacia, concursos ou dia a dia jur√≠dico.

**Formata√ß√£o obrigat√≥ria (em Markdown simples):**

## üß© Conceito direto (4 a 6 linhas)
## üìú Base legal essencial
- Traga o(s) artigo(s) e o nome da lei.
- Se aplic√°vel, inclua enunciado de s√∫mula ou tese vinculante.

## ‚öñÔ∏è Quadro comparativo
| Instituto | Quando se aplica | Exemplo r√°pido |
|----------|------------------|----------------|

## üß† Racioc√≠nio jur√≠dico passo a passo
1. Identifique a situa√ß√£o jur√≠dica.
2. Verifique os pressupostos legais.
3. Aplique a doutrina majorit√°ria.
4. Verifique o entendimento do STJ/STF.
5. Aponte consequ√™ncias pr√°ticas.
6. Eventuais recursos ou medidas aplic√°veis.

## üíº Exemplos pr√°ticos (3 mini-casos)
- Cada exemplo deve simular um caso comum.
- Mostre como o tema se aplica e qual seria a solu√ß√£o.

## üßØ Erros comuns (3) + üß® Pegadinhas de prova (2)
- Liste os equ√≠vocos mais frequentes.
- Alerta sobre armadilhas em provas e concursos.

## ‚úÖ Checklist de prova (5 itens objetivos)
- Pontos que o aluno deve revisar antes da prova.

## üìö Mini gloss√°rio (5 termos-chave explicados)
- Termos usados no tema com explica√ß√£o simples e objetiva.

## üìé Jurisprud√™ncia majorit√°ria
- Citar no m√°ximo 2 julgados (com link direto ‚Äî ex: ConJur, Migalhas ou JusBrasil).

---

**Sugest√µes de temas para novas pesquisas no direito.love**
- Relacione 3 varia√ß√µes do tema "${tema}" com foco em: (a) processo, (b) jurisprud√™ncia e (c) pr√°tica forense.` + CTA,
      
      treinar: (tema) => `Voc√™ √© um elaborador de quest√µes de Direito para treino universit√°rio e OAB.

Par√¢metros do treino:
- N√≠vel: **Intermedi√°rio**
- Quantidade: **10** quest√µes

**Regras:**
- Use **Markdown simples** (sem HTML).
- Quest√µes de m√∫ltipla escolha (A‚ÄìD), 1 correta + 3 alternativas plaus√≠veis.
- Misture: conceito, aplica√ß√£o pr√°tica e interpreta√ß√£o.
- Pesquise quest√µes de provas da OAB e Concursos.
- Primeiro, liste todas as quest√µes ‚Üí depois traga o **Gabarito Comentado**.
- Cada justificativa: 1‚Äì2 linhas, explicando por que a correta est√° certa e as outras n√£o.

**Tema:** ${tema}

**Formato da resposta:**
## Quest√µes (1 a 10)
1. **Q1) Enunciado...**
- (linhas em branco)
---
2. **Q2) Enunciado...**
- (linhas em branco)
---
... (at√© Q10)

## Gabarito Comentado
- Q1) Letra C ‚Äî justificativa breve
- Q2) Letra A ‚Äî justificativa breve
- ...
---

**Sugest√µes de temas para novas pesquisas no direito.love**
- Liste 3 temas correlatos a "${tema}" para treinar (n√≠vel Intermedi√°rio).` + CTA,
      
      noticias: (tema) => `Voc√™ √© um curador de not√≠cias e artigos jur√≠dicos. Pesquise conte√∫dos dos **√∫ltimos 36 meses** relacionados a **${tema}** em **sites jur√≠dicos** (not√≠cias, revistas especializadas, portais acad√™micos/universit√°rios). Evite blogs pessoais sem afilia√ß√£o.

Objetivo: entregar **10 achados** de alta relev√¢ncia, sem duplicatas, com link can√¥nico.

**Regras de formata√ß√£o (obrigat√≥rias):**
- Sa√≠da em **Markdown simples**. **N√£o use HTML**.
- Datas no formato **DD/MM/AAAA**.
- Nome do site sem destaque.
- Um item por linha principal + subitens com h√≠fen.

**Instru√ß√µes de busca:**
- Priorize: ConJur, Migalhas, JOTA, √Çmbito Jur√≠dico, Consultor Jur√≠dico, portais universit√°rios e institucionais.
- Filtre por data: √∫ltimos 36 meses.
- Evite PDFs atr√°s de paywall; se inevit√°vel, marque [acesso restrito].
- Se algo mais antigo for indispens√°vel, acrescente [cl√°ssico].

**Formato da resposta (Markdown):**
# Achados (at√© 10)
1) T√≠tulo ‚Äî Data: DD/MM/AAAA | Site: NOME
   - Resumo: 2‚Äì3 linhas com o n√∫cleo e impacto pr√°tico.
   - Link: URL can√¥nica
---
2) ...
---
10) ...

**Sugest√µes de temas para novas pesquisas no direito.love**
- Traga 3 ganchos de pauta derivados de "${tema}" (ex.: decis√£o recente, tend√™ncia doutrin√°ria, impacto pr√°tico).` + CTA,
      
      casoreal: (tema) => `Voc√™ √© um analista jur√≠dico. Encontre at√© **5 casos concretos reais** relacionados ao tema **${tema}**, publicados nos **√∫ltimos 36 meses** em sites jur√≠dicos confi√°veis (not√≠cias, portais especializados ou acad√™micos).

**Objetivo:** mostrar o tema em a√ß√£o, a partir de decis√µes, julgamentos, repercuss√µes ou pol√™micas p√∫blicas reais.

**Regras obrigat√≥rias:**
- Use apenas **Markdown simples** (sem HTML).
- Cada caso deve conter: T√≠tulo, Data, Site, Link, Resumo e An√°lise.
- Relacione explicitamente o caso com o **tema pesquisado**.

**Fontes permitidas:** ConJur, Migalhas, JOTA, √Çmbito Jur√≠dico, Consultor Jur√≠dico, revistas acad√™micas ou institucionais.

**Formato (Markdown):**
# Casos reais encontrados (at√© 5)
1. T√≠tulo ‚Äî Data: DD/MM/AAAA | Site: NOME
   - Resumo factual (3‚Äì4 linhas).
   - Coment√°rio jur√≠dico: relacione com "${tema}" (5‚Äì6 linhas).
   - Link: URL can√¥nica
2. ...
3. ...
4. ...
5. ...

**Notas finais:**
- Se n√£o encontrar 3 casos, entregue 1 ou 2 e diga [casos adicionais n√£o localizados].

**Sugest√µes de temas para novas pesquisas no direito.love**
- Proponha 3 recortes pr√°ticos de "${tema}" (peti√ß√µes, recursos, provas).` + CTA
    };

    // ===== Estado e elementos =====
    let current = { tema: "", prompts: { aprender: "", treinar: "", noticias: "", casoreal: "" } };
    const el = {
      tema: document.getElementById('tema'),
      gerar: document.getElementById('gerar'),
      thinking: document.getElementById('thinking'),
      result: document.getElementById('result'),
      copyA: document.getElementById('copy-aprender'),
      copyT: document.getElementById('copy-treinar'),
      copyN: document.getElementById('copy-noticias'),
      copyC: document.getElementById('copy-casoreal'),
      reset: document.getElementById('reset'),
      book: document.getElementById('book-list')
    };

    // ===== Persist√™ncia (at√© 50 entradas) =====
    const BOOK_KEY = 'book_data_v2';
    function loadBook(){ try { return JSON.parse(localStorage.getItem(BOOK_KEY) || '[]') || []; } catch { return []; } }
    function saveBook(arr){ try { localStorage.setItem(BOOK_KEY, JSON.stringify(arr)); } catch {} }
    function pushEntry(obj){
      let data = loadBook();
      if(!Array.isArray(data)) data = [];
      data.unshift(obj);
      if(data.length > 50) data = data.slice(0,50);
      saveBook(data);
    }

    function renderBookAll(){
      const data = loadBook();
      el.book.innerHTML = '';
      if(!data.length){
        el.book.innerHTML = '<div class="item"><div class="meta"><div class="obj">Arquivo vazio</div><div class="tema">Voc√™ ainda n√£o gerou nenhum prompt.</div></div></div>';
        return;
      }
      const frag = document.createDocumentFragment();
      data.forEach(({objetivo, tema, prompt})=>{
        const div = document.createElement('div');
        div.className = 'item';
        div.innerHTML = `<div class="meta"><div class="obj">${objetivo||'‚Äî'}</div><div class="tema">${(tema||'').slice(0,300)}</div></div>
        <button class="btn btn-ghost" data-prompt>Copiar</button>`;
        const btn = div.querySelector('[data-prompt]');
        btn.addEventListener('click', async ()=>{
          try{
            await navigator.clipboard.writeText(String(prompt||''));
            btn.textContent = 'Copiado!';
            setTimeout(()=>btn.textContent='Copiar',1000);
          }catch{
            alert('N√£o foi poss√≠vel copiar.');
          }
        });
        frag.appendChild(div);
      });
      el.book.appendChild(frag);
    }

    function strategyHumanName(k){
      const map = { aprender:'APRENDER', treinar:'TREINAR', noticias:'NOT√çCIAS', casoreal:'CASO REAL' };
      return map[k] || k;
    }

    // ===== Gera√ß√£o =====
    function genAll(){
      const tema = (el.tema.value || '').trim();
      if(!tema){ alert('Digite o tema.'); el.tema.focus(); return; }
      current.tema = tema;
      el.result.style.display = 'none';
      el.thinking.style.display = 'flex';
      el.gerar.disabled = true;

      setTimeout(()=>{
        current.prompts.aprender  = Templates.aprender(tema);
        current.prompts.treinar   = Templates.treinar(tema);
        current.prompts.noticias  = Templates.noticias(tema);
        current.prompts.casoreal  = Templates.casoreal(tema);

        // Guarda 4 entradas (limite 50)
        const ts = Date.now();
        pushEntry({ objetivo: strategyHumanName('aprender'), tema, prompt: current.prompts.aprender,  ts });
        pushEntry({ objetivo: strategyHumanName('treinar'),  tema, prompt: current.prompts.treinar,   ts });
        pushEntry({ objetivo: strategyHumanName('noticias'), tema, prompt: current.prompts.noticias,  ts });
        pushEntry({ objetivo: strategyHumanName('casoreal'), tema, prompt: current.prompts.casoreal,  ts });

        el.thinking.style.display = 'none';
        el.result.style.display = 'block';
        el.gerar.disabled = false;
      }, 600);
    }

    async function copy(text, btn){
      try{
        await navigator.clipboard.writeText(text);
        const hint = btn.querySelector('.hint');
        const old = hint.textContent;
        hint.textContent = 'copiado!';
        btn.disabled = true;
        setTimeout(()=>{ hint.textContent = old; btn.disabled = false; }, 1200);
      }catch{
        const ta = document.createElement('textarea'); ta.value = text; ta.style.position='fixed'; ta.style.opacity='0';
        document.body.appendChild(ta); ta.select();
        try {
          document.execCommand('copy');
          const hint = btn.querySelector('.hint'); const old = hint.textContent;
          hint.textContent = 'copiado!'; setTimeout(()=>hint.textContent=old,1200);
        } catch {
          alert('N√£o foi poss√≠vel copiar.');
        } finally {
          document.body.removeChild(ta);
        }
      }
    }

    function resetAll(){
      el.tema.value = ''; el.tema.focus();
      el.result.style.display = 'none';
      el.thinking.style.display = 'none';
    }

    // Listeners
    document.getElementById('gerar').addEventListener('click', genAll);
    document.getElementById('tema').addEventListener('keydown', (e)=>{ if((e.ctrlKey||e.metaKey) && e.key.toLowerCase()==='enter') genAll(); });
    document.getElementById('copy-aprender').addEventListener('click', ()=>copy(current.prompts.aprender,  document.getElementById('copy-aprender')));
    document.getElementById('copy-treinar').addEventListener('click', ()=>copy(current.prompts.treinar,   document.getElementById('copy-treinar')));
    document.getElementById('copy-noticias').addEventListener('click',()=>copy(current.prompts.noticias,  document.getElementById('copy-noticias')));
    document.getElementById('copy-casoreal').addEventListener('click',()=>copy(current.prompts.casoreal,  document.getElementById('copy-casoreal')));
    document.getElementById('reset').addEventListener('click', resetAll);

    // Inicializa
    selectTab('gerar');

    // ===== PWA: Service Worker + Instala√ß√£o =====
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js').catch(()=>{});
      });
    }
    let deferredPrompt = null;
    const installBtn = document.getElementById('btn-install');
    const installNote = document.getElementById('install-note');

    window.addEventListener('beforeinstallprompt', (e)=>{
      e.preventDefault();
      deferredPrompt = e;
      if(installBtn) installBtn.style.display = 'inline-flex';
      if(installNote) installNote.style.display = 'block';
    });

    installBtn?.addEventListener('click', async ()=>{
      try{
        if(!deferredPrompt) return;
        installBtn.disabled = true;
        deferredPrompt.prompt();
        await deferredPrompt.userChoice;
        deferredPrompt = null;
      } finally {
        installBtn.disabled = false;
        installBtn.style.display = 'none';
        if(installNote) installNote.style.display = 'none';
      }
    });

    window.addEventListener('appinstalled', ()=>{
      if(installBtn) installBtn.style.display = 'none';
      if(installNote) installNote.style.display = 'none';
    });
  </script>
</body>
</html>
