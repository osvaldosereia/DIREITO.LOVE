<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>direito.love ‚Äî Criador de Prompts</title>
  <meta name="theme-color" content="#F5C400" />

  <!-- Favicon -->
  <link rel="icon" href="favicon.png" type="image/png" />
  <link rel="apple-touch-icon" href="favicon-180.png" />

  <style>
    :root{
      --bg:#FFFDF0;
      --surface:#ffffff;
      --text:#001840;
      --border:#e5e7eb;

      --primary:#102A71;
      --highlight:#F5C400;
      --highlight-light:#FFDC5F;

      --radius:10px;
      --shadow:0 4px 16px rgba(0,0,0,.05);
      --gap:16px;

      --aside-width:420px;
      --prompt-width:400px;
      --font:-apple-system,BlinkMacSystemFont,"Inter","Segoe UI",Roboto,system-ui,sans-serif;
    }

    *{box-sizing:border-box}
    body{
      margin:0; background:var(--bg); color:var(--text);
      font:400 15px/1.3 var(--font); -webkit-font-smoothing:antialiased;
    }

    /* Topbar amarela + mais estreita */
    .topbar{
      position:sticky; top:0; z-index:30;
      background:var(--highlight); color:var(--text);
      border-bottom:2px solid var(--primary);
      display:flex; justify-content:center; align-items:center;
      padding:4px 10px; /* mais fina */
    }
    .topbar img{height:40px; width:auto;} /* logo maior */

    .wrap{
      display:grid; gap:var(--gap);
      grid-template-columns:1fr;
      padding:18px; max-width:1400px; margin:0 auto;
    }
    @media (min-width:1100px){
      .wrap{grid-template-columns:minmax(0,1fr) var(--aside-width); align-items:start;}
    }

    .card{background:var(--surface); border:1px solid var(--border);
      border-radius:var(--radius); box-shadow:var(--shadow);}

    .builder{padding:18px}
    .builder h2{margin:0 0 12px; font-size:20px; font-weight:700; color:var(--primary);}
    label[for=tema], .section-title{font-size:14px; color:var(--primary); margin:8px 0}
    #tema{
      width:100%; border:1px solid var(--border); background:#fff; color:var(--text);
      padding:10px 12px; border-radius:8px; font-size:15px; outline:none;
    }
    #tema::placeholder{color:#9aa3af}

    /* Lista com checkboxes (duas colunas no desktop) */
    .sessao-lista{
      display:grid; grid-template-columns:1fr; gap:4px;
      margin:10px 0; padding:0; list-style:none;
    }
    @media(min-width:900px){
      .sessao-lista{grid-template-columns:1fr 1fr; column-gap:20px;}
    }
    .sessao-lista li{
      display:flex; align-items:center; gap:6px;
      padding:2px 0; font-size:14px;
    }
    .sessao-lista input[type=checkbox]{accent-color:var(--primary); cursor:pointer;}
    .sessao-lista label{cursor:pointer;}

    .actions{display:flex; gap:10px; margin-top:12px; flex-wrap:wrap}
    .btn{
      appearance:none; border:none; background:var(--highlight); color:#000;
      padding:9px 14px; border-radius:8px; font-size:14px; cursor:pointer; transition:.15s;
    }
    .btn:hover{background:var(--highlight-light);}
    .btn.primary{background:var(--primary); color:#fff; font-weight:700}
    .btn.primary:hover{background:#264399;}

    .aside{position:sticky; top:56px; padding:12px}
    .stack{max-width:var(--prompt-width); margin:0 auto;}

    .ad .box{
      width:min(var(--prompt-width), 100%);
      aspect-ratio:400/180;
      border:1px dashed var(--border); border-radius:10px;
      background:#fff; color:#999; display:flex;
      align-items:center; justify-content:center; font-size:13px;
    }

    textarea#saida{
      width:min(var(--prompt-width), 100%);
      min-height:30vh;
      resize:vertical; padding:10px 12px; border-radius:8px;
      border:1px solid var(--border); background:#fff; color:#001840;
      font-family:ui-monospace,Menlo,Consolas,monospace; font-size:13.5px;
      display:block; margin:0 auto;
    }

    .toast{position:fixed; left:50%; transform:translateX(-50%);
      bottom:18px; background:#111; color:#fff;
      padding:8px 12px; border-radius:999px; opacity:0;
      transition:.2s; z-index:60}
    .toast.show{opacity:1}
    .info{margin-top:6px; font-size:12px; color:#666}

    /* Mostrar "Compartilhar" s√≥ no mobile */
    .only-mobile{display:inline-block;}
    @media (min-width:900px){
      .only-mobile{display:none !important;}
    }
  </style>
</head>
<body>
  <header class="topbar">
    <div class="logo"><img src="icons/logo.png" alt="direito.love"></div>
  </header>

  <div class="wrap">
    <main class="builder card">
      <h2>Criador de Prompts ‚Äî Estudantes de Direito</h2>
      <label for="tema">Tema</label>
      <input id="tema" maxlength="120" placeholder="Digite aqui o tema..." autocomplete="off" />

      <div class="section-title">Selecione como quer estudar:</div>
      <ul class="sessao-lista" id="sessao-lista">
        <li><input type="checkbox" id="s1"><label for="s1">Conceitos e Defini√ß√µes</label></li>
        <li><input type="checkbox" id="s2"><label for="s2">Base Legal Essencial</label></li>
        <li><input type="checkbox" id="s3"><label for="s3">Jurisprud√™ncia Majorit√°ria</label></li>
        <li><input type="checkbox" id="s4"><label for="s4">Doutrina Relevante</label></li>
        <li><input type="checkbox" id="s5"><label for="s5">Exemplos e Casos Pr√°ticos</label></li>
        <li><input type="checkbox" id="s6"><label for="s6">Quadro Comparativo</label></li>
        <li><input type="checkbox" id="s7"><label for="s7">Quest√µes de Fixa√ß√£o</label></li>
        <li><input type="checkbox" id="s8"><label for="s8">Debates, Cr√≠ticas e Tend√™ncias</label></li>
        <li><input type="checkbox" id="s9"><label for="s9">S√∫mulas e Enunciados</label></li>
        <li><input type="checkbox" id="s10"><label for="s10">Estrutura de Pe√ßa / Modelos</label></li>
        <li><input type="checkbox" id="s11"><label for="s11">Checklist de Pe√ßa</label></li>
        <li><input type="checkbox" id="s12"><label for="s12">Racioc√≠nio Jur√≠dico (passo a passo)</label></li>
        <li><input type="checkbox" id="s13"><label for="s13">Mapa Mental</label></li>
        <li><input type="checkbox" id="s14"><label for="s14">Flashcards</label></li>
        <li><input type="checkbox" id="s15"><label for="s15">Erros Comuns</label></li>
        <li><input type="checkbox" id="s16"><label for="s16">Checklist Final de Revis√£o</label></li>
        <li><input type="checkbox" id="s17"><label for="s17">Casos Famosos / Leading Cases</label></li>
        <li><input type="checkbox" id="s18"><label for="s18">Atualiza√ß√µes Recentes</label></li>
        <li><input type="checkbox" id="s19"><label for="s19">Dicas de Prova (OAB/Concursos)</label></li>
        <li><input type="checkbox" id="s20"><label for="s20">Refer√™ncias Bibliogr√°ficas</label></li>
      </ul>

      <div class="actions">
        <button id="criar" class="btn primary" disabled>Criar Prompt</button>
        <button id="limpar" class="btn">Limpar</button>
      </div>
      <div class="info">Selecione as sess√µes que deseja incluir no prompt.</div>
    </main>

    <aside class="aside card">
      <div class="stack">
        <div class="ad"><div class="box">An√∫ncio ‚Ä¢ 400√ó180</div></div>
        <textarea id="saida" readonly placeholder="(vazio)"></textarea>
        <div class="actions" style="margin:10px auto 0; width:min(var(--prompt-width),100%);">
          <button id="copiar2" class="btn">Copiar</button>
          <button id="compartilhar2" class="btn only-mobile">Compartilhar</button>
          <button id="novo2" class="btn">Novo</button>
        </div>
      </div>
    </aside>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

<script>
(function(){
  const $ = (s,r=document)=>r.querySelector(s);
  const $$ = (s,r=document)=>[...r.querySelectorAll(s)];
  const toast = (msg,t=1600)=>{const el=$("#toast");el.textContent=msg;
    el.classList.add("show");setTimeout(()=>el.classList.remove("show"),t);};

  const BASE_PROMPT = `Voc√™ deve assumir a persona de uma **equipe de professores especialistas em todas as √°reas do Direito brasileiro**, formada tamb√©m por **pesquisadores de s√∫mulas e jurisprud√™ncias**. Todos fazem parte da equipe **direito.love**.

üìå Tema escolhido: [INSERIR TEMA AQUI]
üìå Sess√µes a serem seguidas: [INSERIR AQUI A SEQU√äNCIA DE SESS√ïES DEFINIDA PELO USU√ÅRIO]

---`;

  const temaEl=$("#tema"),
        criarBtn=$("#criar"),
        limparBtn=$("#limpar"),
        saida=$("#saida"),
        copiar2=$("#copiar2"),
        compartilhar2=$("#compartilhar2"),
        novo2=$("#novo2");

  function updateCTA(){
    const checked=[...$$(".sessao-lista input:checked")];
    criarBtn.disabled=!(temaEl.value.trim() && checked.length);
  }

  temaEl.addEventListener("input",updateCTA);
  $$(".sessao-lista input").forEach(cb=>cb.addEventListener("change",updateCTA));

  criarBtn.addEventListener("click",()=>{
    const tema=temaEl.value.trim();
    const checked=[...$$(".sessao-lista input:checked")].map(cb=>cb.nextElementSibling.textContent);
    if(!tema){toast("Digite um tema.");return;}
    if(!checked.length){toast("Selecione ao menos 1 sess√£o.");return;}
    const prompt=BASE_PROMPT
      .replace("[INSERIR TEMA AQUI]",tema)
      .replace("[INSERIR AQUI A SEQU√äNCIA DE SESS√ïES DEFINIDA PELO USU√ÅRIO]",checked.join(" ‚Üí "));
    saida.value=prompt;
    toast("Prompt criado!");
  });

  limparBtn.addEventListener("click",()=>{
    temaEl.value="";saida.value="";
    $$(".sessao-lista input").forEach(cb=>cb.checked=false);
    updateCTA();toast("Tudo limpo.");
  });

  copiar2.addEventListener("click",async()=>{
    const text = saida.value;
    if(!text.trim()){toast("Nada para copiar.");return;}
    try{await navigator.clipboard.writeText(text);toast("Copiado!");}
    catch(e){toast("N√£o consegui copiar automaticamente.");}
  });

  // Compartilhar: s√≥ mostra no mobile (CSS). Aqui, ainda escondemos se o recurso n√£o existir.
  if(!(navigator.share && typeof navigator.share==="function")){
    if(compartilhar2) compartilhar2.style.display = "none";
  }else{
    compartilhar2.addEventListener("click",async()=>{
      const text=saida.value.trim();
      if(!text){toast("Nada para compartilhar.");return;}
      try{
        await navigator.share({title:"Prompt ‚Äî direito.love", text, url:window.location.href});
        toast("Compartilhado!");
      }catch(e){
        // usu√°rio cancelou ‚Äî n√£o √© erro fatal
        toast("Compartilhamento cancelado.");
      }
    });
  }

  novo2.addEventListener("click",()=>{
    temaEl.value="";saida.value="";
    $$(".sessao-lista input").forEach(cb=>cb.checked=false);
    updateCTA();toast("Pronto para novo tema."); temaEl.focus();
    window.scrollTo({top:0,behavior:"smooth"});
  });

  // Enter no campo Tema cria o prompt
  temaEl.addEventListener("keydown",e=>{
    if(e.key==="Enter" && !criarBtn.disabled){
      e.preventDefault();criarBtn.click();
    }
  });
})();
</script>
</body>
</html>
