:root{
  /* Paleta */
  --white:#FFFFFF; --lilac:#E1DEE6; --navy:#142B6F; --yellow:#FFD601;
  --bg:var(--white); --fg:#101418; --muted:#5f6470;

  /* Barras de baixo */
  --bar-bg:#f5f7fa;   /* busca (mais clara) */
  --bar-bg-2:#eceff4; /* estudar/buscar (um pouco mais escura) */

  /* Dimensões */
  --topbar-h: 68px;
  --progress-h: 6px;
  --bottom-search-h: 56px;
  --bottom-study-h: 64px;

  --focus:#9bb6ff; --radius:12px; --shadow:0 2px 10px rgba(0,0,0,.06);
  --accent: rgba(255,214,1,.2);
}

*{box-sizing:border-box}
html,body{margin:0;height:100%}
body{
  background:var(--bg); color:var(--fg);
  font:15px/1.55 ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  max-width:100%; overflow-x:hidden;
}
button,input,select{font:inherit}

/* Topbar */
.topbar{
  position:fixed; inset:0 0 auto 0; height:var(--topbar-h);
  display:flex; align-items:center; justify-content:center;
  background:var(--navy); color:#fff; z-index:80; box-shadow:var(--shadow);
}
.topbar-inner{
  width:clamp(320px, 92vw, 960px);
  padding:0 12px; display:flex; align-items:center; gap:12px;
  overflow:hidden;
}
.brand {
  cursor: pointer;
  height: 40px;
  width: auto;
  object-fit: contain;
  flex: 0 0 auto;
  display: block;
}
.brand:focus{outline:2px solid #fff; outline-offset:2px}
.spacer{flex:1 1 auto; min-width:0}
.select-wrap{flex:1 1 50%; min-width:0; max-width:60vw}
select{
  width:100%; height:38px; border:1px solid rgba(255,255,255,.35);
  background:#fff; color:#161b33; border-radius:10px; padding:0 10px;
}
select:focus{outline:2px solid var(--focus); outline-offset:2px}

/* Botão mobile que substitui o select (apenas no mobile) */
.picker-btn{
  display:none;
  height:38px; padding:0 12px; border-radius:10px;
  background:#fff; color:#161b33; border:1px solid rgba(255,255,255,.35);
  cursor:pointer;
}

/* Barra de progresso */
.progress{
  position:fixed; top:var(--topbar-h); left:0; right:0; height:var(--progress-h); z-index:85;
  background:transparent;
}
.progress .bar{
  height:100%; width:0%; background:linear-gradient(90deg, #FFD601, #E1DEE6);
  transition:width .2s ease;
}
.progress[hidden]{display:none}

/* Conteúdo */
.content{
  position:relative;
  padding: calc(var(--topbar-h) + var(--progress-h) + 14px) 0 calc(var(--bottom-search-h) + var(--bottom-study-h) + 24px);
  min-height:100dvh;
}
.container{ width:clamp(320px, 92vw, 960px); margin:0 auto; padding:0 12px }
.placeholder{
  padding:24px; border:1px dashed #dcdfea; border-radius:var(--radius);
  color:var(--muted); background:#fafbff
}

/* Artigos/Blocos */
article{
  white-space:pre-wrap;
  border-bottom:1px solid #eef0f6;
  padding:18px 10px; scroll-margin: 92px; border-radius:10px;
  overflow-wrap:anywhere; word-break:break-word; hyphens:auto; max-width:100%;
}
.supra{ color:#6c7282; font-weight:600; font-size:13px; margin-bottom:6px; }
.supra div{ line-height:1.35 }
.art-title{ display:block; font-weight:700; color:#0e1638; margin:0 0 6px }
article.current-outline{ outline:3px solid #7aa8ff; outline-offset:2px; }
article.highlight-study{ background:var(--accent) }

mark{padding:0 2px; border-radius:3px; background:#ffef99}
.art-body { font-size: 14px; line-height: 1.6; }
.art-title { font-size: 13px; }
.supra { font-size: 11px; }

/* ===== Barra 1 (busca) ===== */
.bottom-search{
  position:fixed; left:0; right:0; bottom:var(--bottom-study-h);
  height:var(--bottom-search-h);
  background: var(--bar-bg);
  border-top:1px solid #e0e4ec;
  z-index:70; display:flex; align-items:center; justify-content:center;
  padding-bottom:max(0px, env(safe-area-inset-bottom));
}
.bottom-search-inner{
  width:clamp(320px, 92vw, 960px);
  display:flex; align-items:center; gap:8px; padding:8px 12px;
}

/* Navegação pós-busca */
.iconbtn{
  width:32px; height:32px; border:1px solid #e2e5f2; background:#fff; border-radius:8px;
  display:grid; place-items:center; cursor:pointer; user-select:none; flex:0 0 32px;
  font-size:16px; line-height:1;
}
.iconbtn:focus,input:focus{outline:2px solid var(--focus); outline-offset:2px}

.navbtn{ display:none; } /* escondidas no pré-busca */

/* Bloco de busca */
.search{flex:1; display:flex; align-items:center; gap:8px; min-width:0; position:relative;}
.search input{
  width:100%; height:36px; border:1px solid #e2e5f2; border-radius:10px; padding:0 12px; background:#fff;
  flex:1 1 auto; min-width:0;
}
.clear-btn{
  position:absolute; right:10px; top:50%; transform:translateY(-50%);
  width:28px; height:28px; border:1px solid #e2e5f2; background:#fff; border-radius:8px;
  display:grid; place-items:center; cursor:pointer; font-size:14px; line-height:1;
}
.clear-btn:focus{ outline:2px solid var(--focus); outline-offset:2px; }

.spinner{
  position:absolute; right:46px; top:50%; transform:translateY(-50%);
  width:18px; height:18px; border:2px solid #e2e5f2; border-top-color:#142B6F; border-radius:50%;
  animation:spin 1s linear infinite; flex:0 0 18px
}
.spinner[hidden]{display:none}
@keyframes spin{to{transform:rotate(360deg)}}

/* Toggle Global (desktop) */
.all-toggle{
  display:inline-flex; align-items:center; gap:6px;
  font-size:12px; color:#6c7282; user-select:none; cursor:pointer;
}
.all-toggle input{ width:16px; height:16px; }

/* Toggle Global (mobile — ícone) */
.all-toggle-mobile{
  display:none;
  width:36px; height:36px; border:1px solid #e2e5f2; background:#fff; border-radius:10px;
  display:none; align-items:center; justify-content:center; cursor:pointer;
}
.all-toggle-mobile[aria-pressed="true"]{ border-color:#9bb6ff; box-shadow:0 0 0 2px rgba(155,182,255,.35) inset; }

/* Contador */
.result-count{
  min-width:64px; font-size:12px; color:#6c7282; border:1px solid #e2e5f2;
  background:#f7f8fc; padding:6px 10px; border-radius:8px; text-align:center;
}

/* ===== Barra 2 (estudar/buscar) ===== */
.bottom-study{
  position:fixed; left:0; right:0; bottom:0; height:var(--bottom-study-h);
  background: var(--bar-bg-2);
  border-top:1px solid #d9dde6;
  z-index:75; display:flex; align-items:center; justify-content:center; padding:8px 0;
  padding-bottom:max(8px, env(safe-area-inset-bottom));
}
.bottom-study-inner{
  width:clamp(320px, 92vw, 960px); padding:0 12px; display:flex; align-items:center; gap:12px;
}
.study,.do-search{
  flex:1 1 0; padding:12px 16px; border-radius:12px; font-weight:800; cursor:pointer;
}
.study{ border:1px solid #0e2a7a; background:#142B6F; color:#fff; }
.do-search{ border:1px solid #f0e08b; background:var(--yellow); color:#0a0a0a; }

/* Resultados globais (cards completos) */
.results-group{ margin:14px 0; padding:12px; border:1px solid #eceff4; border-radius:12px; background:#fafbff; }
.results-group h4{ margin:0 0 8px; font-size:14px; color:#0e1638 }
.result-actions{ display:flex; justify-content:flex-end; margin-top:8px; }
.result-item{
  display:block; text-align:left; width:100%; border:1px solid #e2e5f2; background:#fff;
  padding:10px 12px; border-radius:10px; margin:8px 0; cursor:pointer;
}
.result-item b{ color:#0e1638 }
.result-item small{ color:#6c7282; display:block; margin-top:4px }
.result-item:hover, .result-item:focus{ outline:2px solid var(--focus); outline-offset:2px }
.result-empty{ padding:24px; border:1px dashed #dcdfea; border-radius:12px; color:#6c7282; background:#f9fbff }
.result-more{ border:1px dashed #dcdfea; background:#fff; }

/* Modal IA */
.modal-backdrop{position:fixed; inset:0; background:rgba(0,0,0,.28); display:none; align-items:center; justify-content:center; z-index:100}
.modal{
  background:#fff; border-radius:16px; width:min(640px, 92vw); padding:18px; border:1px solid #eceef7; box-shadow: var(--shadow)
}
.modal h3{margin:0 0 8px; color:#0f173a}
.modal .subtitle{margin:0 0 14px; font-size:13px; color:#3a7f48}
.ia-grid{display:grid; grid-template-columns:1fr 1fr; gap:10px}
.ia-btn{
  display:flex; align-items:center; gap:10px; padding:12px; border:1px solid #e6e8f2; background:#f6f7fb;
  border-radius:12px; cursor:pointer; text-decoration:none; color:#111; font-weight:700; justify-content:center;
}
.ia-btn:focus{outline:2px solid var(--focus); outline-offset:2px}
.modal .foot{margin-top:12px; display:flex; justify-content:flex-end}
.modal .close-btn{padding:8px 12px; border:1px solid #e2e5f2; background:#fff; border-radius:10px; cursor:pointer}

/* Toast */
.toast{
  position:fixed; left:50%; transform:translateX(-50%);
  bottom:calc(var(--bottom-study-h) + var(--bottom-search-h) + 14px);
  background:#111; color:#fff; padding:8px 12px; border-radius:10px; opacity:0; pointer-events:none; transition:opacity .2s; z-index:200
}
.toast.show{opacity:1}

.bottom-search[hidden], .bottom-study[hidden]{display:none}

/* Mobile-only */
@media (max-width: 768px){
  .brand{ font-size:18px; }
  .select-wrap select{ display:none; }
  .picker-btn{ display:inline-flex; align-items:center; gap:8px; }
  .select-wrap select, select option, select optgroup{ font-size:14px; }

  /* Espaço pro spinner+limpar dentro do input */
  .search input{ padding-right: 84px; }

  /* Setas ocultas no pré-busca (não ocupam espaço) */
  .navbtn{ display:none !important; }

  /* Desktop toggle some; mobile ícone aparece */
  .all-toggle{ display:none; }
  .all-toggle-mobile{ display:inline-flex; }

  /* Contador pode encolher */
  .result-count{ min-width:auto; padding:6px 8px; }
}

/* Estados adicionados via JS */
.mode-pre .navbtn{ display:none; }
.mode-post .navbtn{ display:grid; }
.mode-pre .result-count{ display:none; }
.mode-post .result-count{ display:block; }
